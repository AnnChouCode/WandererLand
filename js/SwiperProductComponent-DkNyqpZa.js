import{u as p}from"./userProductStore-COJptiis.js";import{m as y,a as B}from"./pinia-D1tb24LR.js";import{A as N,P,N as v,S as k,a as D}from"./swiper-Crg6idDU.js";import{B as C}from"./BtnFavorite-vZQyPrGI.js";import{B as x}from"./BtnSwiperNavigation-Bh87lTGT.js";import{P as A}from"./ProductCard-ChBPnpEX.js";import{B as I}from"./BtnSeeMore-Ciez2Tx3.js";import{_ as b}from"./index-Ckqhthat.js";import{a_ as a,aR as n,a5 as u,a6 as c,ba as m,a3 as f,a4 as O,ae as r,bx as l,L as F,aY as J,ab as L}from"./@vue-Cqo5QHyB.js";const M={props:["dataCategory"],data(){return{maxNumItem:8,DataInfo:{products:{title:"探索新作品",path:"/productlist",infoPath:"productinfo"},artists:{title:"認識新藝術家",path:"/artistlist",infoPath:"artistinfo"},recently:{title:"猜你喜歡",path:"",infoPath:"productinfo"}},currentDatas:[],modules:[N,P,v],isArtistBlock:!0}},methods:{...y(p,["getAllProducts"]),shuffleArray(t){for(let s=t.length-1;s>0;s--){const o=Math.floor(Math.random()*(s+1));[t[s],t[o]]=[t[o],t[s]]}return t},getRandomProducts(t){const s=this.maxNumItem-this.currentDatas.length;return this.shuffleArray(t).slice(0,s)},async getAllDatas(){await this.getAllProducts(),this.dataCategory==="artists"&&(this.currentDatas=JSON.parse(JSON.stringify(this.sortNewest.newestArtist)).slice(0,this.maxNumItem)),this.dataCategory==="products"&&(this.currentDatas=JSON.parse(JSON.stringify(this.sortNewest.newestProduct)).slice(0,this.maxNumItem)),this.dataCategory==="recently"&&(this.currentDatas=this.currentDatas.concat(this.getRandomProducts(this.sortNewest.newestProduct)))}},mounted(){if(this.isArtistBlock=this.dataCategory==="artists",this.dataCategory==="recently"){const t=JSON.parse(localStorage.getItem("recentlyList"))||[];if(this.currentDatas=t,this.currentDatas.length>=this.maxNumItem)return}this.getAllDatas()},computed:{...B(p,["sortNewest"])},components:{Swiper:k,SwiperSlide:D,BtnSwiperNavigation:x,ProductCard:A,BtnSeeMore:I,BtnFavorite:C},inject:["triggerGetFavorites"]},T={class:"py-7 py-md-9"},V={class:"d-flex justify-content-between align-items-center mb-7 mb-md-8"},j={class:"fs-2 fs-md-1"},E={class:"position-relative"},R={class:"fs-info fs-md-6 text-info"};function G(t,s,o,Y,e,q){const h=a("BtnSeeMore"),g=a("BtnFavorite"),_=a("ProductCard"),S=a("SwiperSlide"),d=a("BtnSwiperNavigation"),w=a("Swiper");return n(),u("div",T,[c("div",V,[c("h2",j,m(e.DataInfo[o.dataCategory].title),1),e.DataInfo[o.dataCategory].path!==""?(n(),f(h,{key:0,linkTo:e.DataInfo[o.dataCategory].path},null,8,["linkTo"])):O("",!0)]),c("div",E,[r(w,{slidesPerView:2,spaceBetween:12,pagination:{clickable:!0},loop:!0,breakpoints:{768:{slidesPerView:3,spaceBetween:48}},autoplay:{delay:5e3,disableOnInteraction:!1},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},modules:e.modules,class:"product-swiper"},{default:l(()=>[(n(!0),u(F,null,J(e.currentDatas,i=>(n(),f(S,{key:i.id},{default:l(()=>[r(_,{item:i,linkTo:`/${e.DataInfo[o.dataCategory].infoPath}/${i.id}`,shape:e.isArtistBlock?"rounded-circle":"",titlePosition:e.isArtistBlock?"text-center":""},L({_:2},[e.isArtistBlock?void 0:{name:"price",fn:l(()=>[c("p",R,"NT$ "+m(i.price.toLocaleString()),1)]),key:"0"},e.isArtistBlock?void 0:{name:"favorite",fn:l(()=>[r(g,{productId:i.id},null,8,["productId"])]),key:"1"}]),1032,["item","linkTo","shape","titlePosition"])]),_:2},1024))),128)),r(d,{position:"bottom",direction:"next"}),r(d,{position:"bottom",direction:"prev"})]),_:1},8,["navigation","modules"])])])}const tt=b(M,[["render",G],["__scopeId","data-v-af284d54"]]);export{tt as S};
