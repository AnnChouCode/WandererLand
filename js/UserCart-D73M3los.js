import{c as _}from"./userCartStore-ldkYgq0X.js";import{m as g,a as y}from"./pinia-D1tb24LR.js";import{S as x}from"./SwiperProductComponent-hcIw23vN.js";import{M as C}from"./bootstrap-B1ByGxZb.js";import{a_ as k,aR as d,a5 as n,a6 as t,L as p,aY as u,bz as b,bq as L,ba as i,ae as B,bp as S,aU as I,aS as T,ad as f}from"./@vue-Cqo5QHyB.js";import{_ as M}from"./present-ZKA28he5.js";import{_ as V}from"./index-Bv_xgM6y.js";import"./statusStore-bNOcWQBU.js";import"./axios-Di5RpEPX.js";import"./sweetalert2-Bxbxx77j.js";import"./@ckeditor-RgNY5E4z.js";import"./vue-ZlQZhsMo.js";import"./vue-loading-overlay-CtFUBeEI.js";import"./userProductStore-COJptiis.js";import"./swiper-Crg6idDU.js";import"./BtnFavorite-DbiJyGKg.js";import"./favoriteStore-CUDextq_.js";import"./BtnSwiperNavigation-C_Y6Sdq1.js";import"./ProductCard-p3gfEJS5.js";import"./BtnSeeMore-Bo15SjEq.js";import"./@popperjs-WhmJkuoZ.js";import"./vue-axios-BaogFJPH.js";import"./vue-sweetalert2-BkTfjfvc.js";import"./vee-validate-CasJ09EL.js";import"./@vee-validate-DziBkgPq.js";/* empty css                        */import"./aos-C_17NL_K.js";import"./vue-router-DOL1scXn.js";const $="/WandererLand/svg/firework01-DmM0zjFc.svg",w="/WandererLand/svg/firework03-BhMQ_5vl.svg",W="/WandererLand/svg/firework02-DJ08Fvu4.svg";var q={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"wandererland",BASE_URL:"/WandererLand/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API:E,VITE_PATH:N}=q,P={data(){return{coupon:"",toastState:!0,doAction:null,modal:null}},methods:{...g(_,["getCartsList","updateCart","deleteCartItem","checkCoupon","copyCouponCode"]),clearCartsList(){this.swalQuestionWithBootstrapButtons.fire({title:"確定要清空購物車嗎？",icon:"question",text:"這個動作無法復原",showCancelButton:!0,cancelButtonText:"取消",confirmButtonText:"確認更改"}).then(s=>{if(s.isConfirmed){const e=this.$loading.show(),h=`${E}/api/${N}/carts`;this.axios.delete(h).then(r=>{this.swalInfoCheckWithBootstrapButtons.fire({title:r.data.message,confirmButtonText:"確認"}),this.getCartsList()}).catch(r=>this.swalInfoCheckWithBootstrapButtons.fire({icon:"error",text:r.response.data.message,confirmButtonText:"確認"})).finally(()=>{e.hide()})}})},checkOrder(){this.$router.push("/order/checkform")},hideCouponModal(){sessionStorage.setItem("shownCouponModal",!0),this.modal.hide()}},mounted(){this.getCartsList(),sessionStorage.getItem("shownCouponModal")||(this.modal=new C(this.$refs.couponModal,{keyboard:!1,backdrop:"static"}),this.modal.show()),this.swalQuestionWithBootstrapButtons=this.$swal.mixin({customClass:{confirmButton:"m-1 btn btn-outline-default",cancelButton:"m-1 btn btn-default"},buttonsStyling:!1}),this.swalInfoCheckWithBootstrapButtons=this.$swal.mixin({customClass:{confirmButton:"m-1 btn btn-default"},buttonsStyling:!1})},computed:{...y(_,["cartsList"])},components:{SwiperProductComponent:x}},a=s=>(I("data-v-bba65c39"),s=s(),T(),s),A={class:"container user-page-container flex-grow-1",style:{"padding-bottom":"0"}},D=a(()=>t("h2",{class:"mb-7 mb-md-8 h1 lh-sm title-letter-spacing text-center h1"},"購物車",-1)),U={key:0,class:"text-center fs-4"},O={key:1,class:"position-relative"},j=["disabled"],R={class:"table table-sm mb-4 mb-md-5"},z=a(()=>t("thead",null,[t("tr",{class:"fs-info fs-md-6"},[t("th",{scope:"col",style:{"padding-left":"0"}}),t("th",{scope:"col",class:"fw-bold"},[t("span",{class:"d-none d-md-block"},"商品")]),t("th",{scope:"col",class:"d-none d-md-table-cell fw-bold"},"單價"),t("th",{scope:"col",class:"fw-bold"},"數量"),t("th",{scope:"col",class:"fw-bold"},"總計")])],-1)),F={scope:"row",class:"w-auto w-md-15",style:{"padding-left":"0"}},Q=["onClick"],H=a(()=>t("i",{class:"bi bi-x fs-4"},null,-1)),J=[H],Y={class:"d-flex gap-3 gap-md-5"},G={style:{"max-width":"107px"},class:"ratio-1x1"},K=["src","alt"],X={style:{"max-width":"286px","min-width":"80px"},class:"d-flex flex-column"},Z={class:"flex-grow-1"},tt={class:"mb-1 fw-bold fs-info fs-md-6"},ot={class:"d-none d-md-block fs-info text-info fw-light"},st={class:"fs-info fs-md-6"},et={class:"d-none d-md-table-cell fs-info fs-md-6"},lt={class:"fs-info fs-md-6"},at=["onUpdate:modelValue","onChange"],it=["selected","value"],dt=["selected","value"],nt={class:"fs-info fs-md-6",style:{"min-width":"100px"}},ct={class:"row g-6 justify-content-between"},rt={class:"col-12 col-md-5 col-lg-4"},pt={class:"row"},mt={class:"col-6"},ut={class:"border-bottom border-default h-100"},ft={class:"col-6"},ht=["disabled"],_t={class:"col-12 col-md-5"},bt={class:"border-bottom border-default"},wt={class:"row mb-4"},vt=a(()=>t("div",{class:"col fw-bold"},"總計",-1)),gt={class:"col text-end fw-bold"},yt={class:"row mb-4 mb-md-6"},xt=a(()=>t("div",{class:"col fw-bold"},"折扣",-1)),Ct={class:"col text-end fw-bold"},kt={class:"row py-4 py-md-7"},Lt=a(()=>t("div",{class:"col fw-bold fs-6 fs-md-5"},"結帳金額",-1)),Bt={class:"col text-end fw-bold fs-6 fs-md-5"},St=["disabled"],It={class:"modal show",tabindex:"-1",ref:"couponModal"},Tt={class:"modal-dialog modal-dialog-centered modal-lg"},Mt={class:"position-relative container modal-content rounded-0"},Vt={class:"row flex-column flex-md-row"},$t=a(()=>t("div",{class:"d-none d-md-block col col-md-6 px-0"},[t("img",{src:M,alt:"coupon",class:"object-fit-cover w-100 h-100"})],-1)),Wt={class:"col col-md-6 d-flex flex-column p-4"},qt={class:"mx-auto mt-4 mb-5 mt-md-8 mb-md-9","data-aos":"fade-up","data-aos-duration":"3000"},Et=a(()=>t("h3",{class:"mb-5 mb-md-8 fs-5 fs-md-3 title-letter-spacing lh-base"},[f("為你的第一筆訂單，"),t("span",{class:"d-block"},[f("獲取 "),t("span",{class:"fw-bold"},"97"),f(" 折折扣")])],-1)),Nt=a(()=>t("img",{src:$,alt:"firework",class:"position-absolute firework translate-middle",style:{width:"170px",right:"-121px",top:"77px"}},null,-1)),Pt=a(()=>t("img",{src:w,alt:"firework",class:"position-absolute firework translate-middle",style:{width:"100px",right:"-14px",top:"169px"}},null,-1)),At=a(()=>t("img",{src:W,alt:"firework",class:"position-absolute firework translate-middle",style:{width:"67px",left:"-2px",top:"75px"}},null,-1)),Dt=a(()=>t("img",{src:w,alt:"firework",class:"position-absolute firework translate-middle",style:{width:"167px",left:"-32px",top:"167px"}},null,-1));function Ut(s,e,h,r,m,c){const v=k("swiperProductComponent");return d(),n(p,null,[t("div",A,[D,s.cartsList.final_total?(d(),n("div",O,[t("button",{class:"position-absolute top-0 start-0 btn btn-primary rounded-0 fs-info text-info",type:"button",onClick:e[0]||(e[0]=(...o)=>c.clearCartsList&&c.clearCartsList(...o)),disabled:!s.cartsList.final_total},"清空購物車",8,j),t("table",R,[z,t("tbody",null,[(d(!0),n(p,null,u(s.cartsList.carts,o=>(d(),n("tr",{key:o.id},[t("th",F,[t("button",{type:"button",class:"btn px-0",onClick:l=>s.deleteCartItem(o.id)},J,8,Q)]),t("td",null,[t("div",Y,[t("div",G,[t("img",{src:o.product.imageUrl,alt:o.product.title,class:"w-100 h-100 object-fit-contain",style:{"min-width":"40px"}},null,8,K)]),t("div",X,[t("div",Z,[t("h3",tt,i(o.product.title),1),t("p",ot,i(o.product.artist),1)]),t("p",st,i(o.product.size),1)])])]),t("td",et," NT$ "+i(o.product.origin_price.toLocaleString()),1),t("td",lt,[b(t("select",{class:"form-select form-select-sm rounded-0 border-default fs-info fs-md-6","aria-label":".form-select-sm example",style:{width:"65px"},"onUpdate:modelValue":l=>o.qty=l,onChange:l=>s.updateCart(o)},[o.product.quantity?(d(!0),n(p,{key:0},u(o.product.quantity,l=>(d(),n("option",{key:l,selected:l===o.qty,value:l},i(l),9,it))),128)):(d(),n(p,{key:1},u(99,l=>t("option",{key:l,selected:l===o.qty,value:l},i(l),9,dt)),64))],40,at),[[S,o.qty,void 0,{number:!0}]])]),t("td",nt," NT$ "+i(o.final_total.toLocaleString()),1)]))),128))])]),t("div",ct,[t("div",rt,[t("div",pt,[t("div",mt,[t("div",ut,[b(t("input",{type:"text",placeholder:"請輸入優惠碼",class:"form-control border-0 text-center h-100","onUpdate:modelValue":e[1]||(e[1]=o=>m.coupon=o)},null,512),[[L,m.coupon,void 0,{trim:!0}]])])]),t("div",ft,[t("button",{class:"py-3 btn btn-outline-default rounded-0 w-100",type:"button",disabled:!s.cartsList.final_total,onClick:e[2]||(e[2]=o=>s.checkCoupon(m.coupon))},"輸入優惠券",8,ht)])])]),t("div",_t,[t("div",bt,[t("div",wt,[vt,t("div",gt,"NT$ "+i(s.cartsList.total.toLocaleString()),1)]),t("div",yt,[xt,t("div",Ct,"- NT$ "+i((s.cartsList.total-s.cartsList.final_total).toLocaleString()),1)])]),t("div",kt,[Lt,t("div",Bt,"NT$ "+i(s.cartsList.final_total.toLocaleString()),1)]),t("button",{type:"button",class:"py-2 py-md-3 btn btn-default rounded-0 fw-bold w-100",onClick:e[3]||(e[3]=(...o)=>c.checkOrder&&c.checkOrder(...o)),disabled:!s.cartsList.final_total},"送出訂單",8,St)])])])):(d(),n("p",U,"目前購物車內沒有內容")),B(v,{dataCategory:"recently"})]),t("div",It,[t("div",Tt,[t("div",Mt,[t("div",Vt,[$t,t("div",Wt,[t("button",{type:"button",class:"align-self-end btn-close","aria-label":"Close",onClick:e[4]||(e[4]=(...o)=>c.hideCouponModal&&c.hideCouponModal(...o))}),t("div",qt,[Et,t("button",{type:"button",class:"py-2 py-md-3 px-6 px-lg-9 btn btn-default fw-bold rounded-0 w-100 text-nowrap",onClick:e[5]||(e[5]=o=>s.copyCouponCode("present97"))},"點擊複製優惠碼")])])]),Nt,Pt,At,Dt])])],512)],64)}const _o=V(P,[["render",Ut],["__scopeId","data-v-bba65c39"]]);export{_o as default};
