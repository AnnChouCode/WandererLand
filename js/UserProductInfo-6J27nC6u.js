import{u as m}from"./userProductStore--1YIGR4G.js";import{f as S}from"./favoriteStore-gdu0HLaJ.js";import{c as f}from"./userCartStore-WPGHv7Su.js";import{m as p,a as g}from"./pinia-D6A4allF.js";import{B as x}from"./BtnFavorite-47F9kbHN.js";import{P as A}from"./productCard-dwMhnoDD.js";import{B as k}from"./BtnSeeMore-h_vPV2aI.js";import{a_ as u,aR as n,a5 as c,a6 as t,L as h,aY as b,a4 as d,ba as i,ae as y,a3 as C,bC as O,aG as q}from"./@vue-zaZYt_0T.js";import{_ as T}from"./index-4m7lMajm.js";import"./axios-xY6ymfx7.js";import"./sweetalert2-NwvYGOW7.js";import"./@ckeditor-bzq-HQy0.js";import"./vue-zaw7FvyG.js";import"./vue-loading-overlay-nDy6RxjO.js";import"./statusStore-ZshnCoww.js";import"./vue-axios-1bbP-7uc.js";import"./vue-sweetalert2-HUKuUMJw.js";import"./vee-validate-yOM-A2XF.js";import"./@vee-validate-vwB3goxc.js";import"./bootstrap-Lpi9Oc84.js";import"./@popperjs-kvWuk1nc.js";/* empty css                        */import"./aos-ZvF7bt_9.js";import"./vue-router--ANrfSlZ.js";var B={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"wandererland",BASE_URL:"/WandererLand/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API:R,VITE_PATH:N}=B,L={data(){return{currentProductId:null,product:{},qty:1,tempRelatedAllProducts:[],relatedProducts:[],artistInfo:{},quantityInCart:""}},watch:{cartsList(){this.getAvailableProductNum(this.currentProductId)},$route(){this.initPageInfo()}},methods:{...p(m,["getAllProducts"]),...p(f,["addToCart","getCartsList"]),...p(S,["recentlyViewed"]),changeImage(e){this.product.currentImage=this.product.imagesStock[e]},getCurrentProduct(e){const s=`${R}/api/${N}/product/${e}`;return this.axios.get(s).then(r=>{const a=r.data.product;return this.product={productInfo:a,currentImage:a.imageUrl},a.imagesUrl&&(this.product.imagesStock=[a.imageUrl,...a.imagesUrl]),this.recentlyViewed(a),a.artist}).catch(r=>console.log(r.response.data.message))},getRelatedProducts(e,s){this.tempRelatedAllProducts=this.sortNewest.newestProduct.filter(r=>r.artist===e&&r.id!==s),this.tempRelatedAllProducts.length||(this.tempRelatedAllProducts=this.sortNewest.newestProduct.filter(r=>r.group===this.product.productInfo.group)),this.relatedProducts=this.tempRelatedAllProducts.slice(0,3)},getArtistInfo(e){this.artistInfo=this.sortNewest.newestArtist.filter(s=>s.title===e)[0]},getAvailableProductNum(e){const s=this.cartsList.carts.filter(r=>r.product_id===e);this.quantityInCart=s.length?s[0].qty:0},async initPageInfo(){try{this.currentProductId=this.$route.params.id;const e=await this.getCurrentProduct(this.currentProductId);await this.getAllProducts(),this.getCartsList(),this.getAvailableProductNum(this.currentProductId),this.getRelatedProducts(e,this.currentProductId),this.getArtistInfo(e)}catch(e){throw console.log("錯誤:",e),e}}},mounted(){this.initPageInfo()},computed:{...g(m,["sortNewest"]),...g(f,["cartsList"])},components:{ProductCard:A,BtnSeeMore:k,BtnFavorite:x}},V={key:0,class:"container user-page-container"},E={class:"row g-1 g-lg-6"},z={class:"col-12 col-md-8"},U={class:"row"},D={class:"position-relative col-12 col-lg-3"},F={class:"bg-tertiary h-100 overflow-hidden"},M={key:0,class:"position-lg-absolute row px-2 py-2 py-lg-0 px-lg-auto flex-nowrap flex-lg-column overflow-auto scrollbar-y-hide w-lg-100 h-lg-100"},Q=["onClick"],j=["src"],H={class:"col-12 col-lg-9 order-first order-lg-last flex-shrink-0 content"},G={class:"bg-tertiary ratio-1x1 overflow-hidden"},W=["src","alt"],Y={class:"col-12 col-md-4"},J={class:"p-3 p-lg-7 mb-3 mb-md-6 bg-tertiary"},K={class:"d-flex justify-content-between align-items-start mb-5 mb-md-7"},X={class:"mb-2 h6 text-info fw-bold"},Z={class:"h5 fw-bold"},$={class:"lh-base lh-md-lg fs-info text-info"},tt=t("hr",{class:"my-6 text-default"},null,-1),ot={class:"accordion accordion-flush",id:"accordionPanelsProductInfo"},et={class:"accordion-item bg-transparent border-default"},st=t("h2",{class:"accordion-header",id:"panelsStayOpen-headingSize"},[t("button",{class:"accordion-button text-info fw-bold bg-transparent p-0",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseSize","aria-expanded":"true","aria-controls":"panelsStayOpen-collapseSize",style:{"box-shadow":"none"}}," 作品規格 ")],-1),rt={id:"panelsStayOpen-collapseSize",class:"accordion-collapse collapse show","aria-labelledby":"panelsStayOpen-headingSize"},nt={class:"accordion-body p-0 pt-4 lh-base lh-md-lg h6 text-info"},ct=t("hr",{class:"my-6 text-default"},null,-1),it={class:"accordion accordion-flush",id:"accordionPanelsProductInfo"},at={class:"accordion-item bg-transparent border-default"},lt=t("h2",{class:"accordion-header",id:"panelsStayOpen-headingQty"},[t("button",{class:"accordion-button text-info fw-bold bg-transparent p-0",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseQty","aria-expanded":"true","aria-controls":"panelsStayOpen-collapseQty",style:{"box-shadow":"none"}}," 作品版數 ")],-1),dt={id:"panelsStayOpen-collapseQty",class:"accordion-collapse collapse show","aria-labelledby":"panelsStayOpen-headingQty"},pt={class:"accordion-body p-0 pt-4 lh-base lh-md-lg h6 text-info"},ut=t("hr",{class:"my-6 text-default"},null,-1),ht={class:"accordion accordion-flush",id:"accordionPanelsProductInfo"},_t={class:"accordion-item bg-transparent"},mt={class:"accordion-header",id:"panelsStayOpen-headingAbout"},ft={class:"accordion-button collapsed text-info fw-bold bg-transparent p-0",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseAbout","aria-expanded":"true","aria-controls":"panelsStayOpen-collapseAbout",style:{"box-shadow":"none"}},gt={id:"panelsStayOpen-collapseAbout",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingOne"},bt={class:"accordion-body p-0 pt-4 lh-base lh-md-lg fs-info text-info"},yt=["disabled"],It={key:0},vt={key:1},Pt={key:1,class:"container"},wt={class:"py-7 py-md-9"},St={class:"d-flex justify-content-between align-items-center mb-7 mb-md-8"},xt=t("h2",{class:"fs-2 fs-md-1"},"相似作品",-1),At={class:"row g-3 g-md-8"};function kt(e,s,r,a,o,I){const v=u("BtnFavorite"),P=u("BtnSeeMore"),w=u("ProductCard");return n(),c(h,null,[o.product.productInfo?(n(),c("div",V,[t("div",E,[t("div",z,[t("div",U,[t("div",D,[t("div",F,[o.product.imagesStock?(n(),c("div",M,[(n(!0),c(h,null,b(o.product.imagesStock,(l,_)=>(n(),c("a",{href:"#",class:"col-3 col-lg-12 py-0 py-lg-2 overflow-hidden",key:"img"+_,onClick:O(Ct=>I.changeImage(_),["prevent"])},[t("img",{src:l,alt:"product",class:q(["object-fit-contain w-100 h-100",l===o.product.currentImage?"border border-2 border-info":""])},null,10,j)],8,Q))),128))])):d("",!0)])]),t("div",H,[t("div",G,[t("img",{src:o.product.currentImage,alt:o.product.productInfo.title,class:"object-fit-contain w-100 h-100"},null,8,W)])])])]),t("div",Y,[t("div",J,[t("div",K,[t("div",null,[t("h3",X,i(o.product.productInfo.artist),1),t("h2",Z,i(o.product.productInfo.title),1)]),y(v,{productId:o.product.productInfo.id},null,8,["productId"])]),t("p",$,i(o.product.productInfo.content),1),tt,t("div",ot,[t("div",et,[st,t("div",rt,[t("div",nt,i(o.product.productInfo.size),1)])])]),ct,t("div",it,[t("div",at,[lt,t("div",dt,[t("div",pt,[t("p",null,"剩餘版數 "+i(o.product.productInfo.quantity?o.product.productInfo.quantity-o.quantityInCart:"無限"),1),t("p",null,"總版數 "+i(o.product.productInfo.quantity?o.product.productInfo.quantity:"無限"),1)])])])]),ut,t("div",ht,[t("div",_t,[t("h2",mt,[t("button",ft," 關於 "+i(o.artistInfo.title),1)]),t("div",gt,[t("div",bt,i(o.artistInfo.content),1)])])])]),t("button",{type:"button",class:"position-relative py-2 py-md-3 btn btn-default rounded-0 fw-bold w-100",onClick:s[0]||(s[0]=l=>e.addToCart(o.product.productInfo.id,o.qty)),disabled:o.product.productInfo.quantity-o.quantityInCart===0},[o.product.productInfo.quantity-o.quantityInCart!==0?(n(),c("span",It,"加入購物車．NT$ "+i(o.product.productInfo.price.toLocaleString()),1)):(n(),c("span",vt,"已絕版．NT$ "+i(o.product.productInfo.price.toLocaleString()),1))],8,yt)])])])):d("",!0),o.relatedProducts.length?(n(),c("div",Pt,[t("div",wt,[t("div",St,[xt,o.tempRelatedAllProducts?(n(),C(P,{key:0,linkTo:o.tempRelatedAllProducts.length?`/productlist?artist=${o.artistInfo.title}`:`/productlist?group=${o.product.productInfo.group}`},null,8,["linkTo"])):d("",!0)]),t("div",At,[(n(!0),c(h,null,b(o.relatedProducts,l=>(n(),c("div",{class:"col-6 col-md-4",key:l.id},[y(w,{item:l,linkTo:`/productInfo/${l.id}`,showPrice:!0,showFavorite:!0},null,8,["item","linkTo"])]))),128))])])])):d("",!0)],64)}const $t=T(L,[["render",kt]]);export{$t as default};
