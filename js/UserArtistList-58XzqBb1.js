import{u as v}from"./userProductStore--1YIGR4G.js";import{m as A,a as k}from"./pinia-D6A4allF.js";import{O as C}from"./bootstrap-Lpi9Oc84.js";import{aR as n,a5 as l,a6 as t,aG as c,bC as p,L as u,aY as h,ba as b,a4 as m,a_ as _,ae as w,ad as S,a3 as L}from"./@vue-zaZYt_0T.js";import{_ as y}from"./index-DedpZ7u7.js";import{P as N}from"./productCard-n8P0Y1Yo.js";import{P}from"./PaginationComponent-AuMb08sl.js";import"./axios-xY6ymfx7.js";import"./sweetalert2-NwvYGOW7.js";import"./@ckeditor-bzq-HQy0.js";import"./vue-zaw7FvyG.js";import"./vue-loading-overlay-nDy6RxjO.js";import"./@popperjs-kvWuk1nc.js";import"./vue-axios-1bbP-7uc.js";import"./vue-sweetalert2-HUKuUMJw.js";import"./vee-validate-yOM-A2XF.js";import"./@vee-validate-vwB3goxc.js";/* empty css                        */import"./aos-ZvF7bt_9.js";import"./vue-router--ANrfSlZ.js";import"./BtnFavorite-gacGFKCT.js";import"./favoriteStore-gdu0HLaJ.js";import"./statusStore-ZshnCoww.js";import"./userCartStore-WPGHv7Su.js";const R={data(){return{filterRules:{},mobileNav:null}},props:["allArtists","groupList"],methods:{filterShow(a){if(a){const[s,d]=a;this.filterRules[s]=d;const r=Object.entries(this.filterRules).map(o=>o.join("=")).join("&");this.$router.push(`/artistList?${r}`);return}this.filterRules={},this.$router.push("/artistList")},openMobileNav(){this.mobileNav.show()},closeMobileNav(){this.mobileNav.hide()}},mounted(){this.mobileNav=new C(this.$refs.mobileNav),this.filterRules=JSON.parse(JSON.stringify(this.$route.query)),delete this.filterRules.current_page}},T={class:"fixed-top z-1 bg-tertiary nav-product-filter w-100"},F={class:"container"},Z={class:"d-none d-lg-flex align-items-center"},j={class:"d-none d-lg-flex align-items-center list-unstyled"},G={class:"dropdown"},O=t("button",{type:"button",class:"btn d-flex align-items-center px-5 py-4 text-default fs-info border-0",id:"btnProductSort","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("span",{class:"me-3"},"排序"),t("i",{class:"bi bi-chevron-down"})],-1),q={class:"dropdown-menu p-0 rounded-0","aria-labelledby":"btnProductSort"},z={class:"dropdown"},M=t("button",{type:"button",class:"btn d-flex align-items-center px-5 py-4 text-default fs-info border-0",id:"btnGroupFilter","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("span",{class:"me-3"},"題材"),t("i",{class:"bi bi-chevron-down"})],-1),E={class:"dropdown-menu p-0 overflow-y-scroll rounded-0 dropdown-scrollbar","aria-labelledby":"btnGroupFilter"},I=["onClick"],B={class:"dropdown"},U=t("button",{type:"button",class:"btn d-flex align-items-center px-5 py-4 text-default fs-info border-0",id:"btnArtistFilter","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("span",{class:"me-3"},"藝術家"),t("i",{class:"bi bi-chevron-down"})],-1),V={class:"dropdown-menu p-0 overflow-y-scroll rounded-0 dropdown-scrollbar","aria-labelledby":"btnArtistFilter"},$=["onClick"],D={class:"d-flex d-lg-none align-items-center justify-content-between"},J={class:"d-flex align-items-center justify-content-between list-unstyled"},W={class:"dropdown"},Y=t("button",{type:"button",class:"btn d-flex align-items-center px-5 py-4 text-default fs-info border-0",id:"btnProductSort","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("span",{class:"me-3"},"排序"),t("i",{class:"bi bi-chevron-down"})],-1),H={class:"dropdown-menu p-0 overflow-hidden","aria-labelledby":"btnProductSort"},K=t("span",{class:"me-3"},"篩選",-1),Q=t("i",{class:"bi bi-chevron-down"},null,-1),X=[K,Q],tt={class:"offcanvas offcanvas-start bg-primary",tabindex:"-1",id:"offcanvasNav","aria-labelledby":"offcanvasNavLabel",ref:"mobileNav"},et=t("div",{class:"offcanvas-header"},[t("h5",{class:"offcanvas-title",id:"offcanvasNavLabel"},"WANDERER LAND"),t("button",{type:"button",class:"btn-close text-reset","data-bs-dismiss":"offcanvas","aria-label":"Close"})],-1),st={class:"offcanvas-body"},ot={class:"d-flex flex-column gap-3 gap-sm-5 list-unstyled accordion accordion-flush",id:"accordionFlushFilter"},it={class:"accordion-item bg-transparent"},nt=t("h2",{class:"accordion-header"},[t("button",{class:"accordion-button collapsed px-0 text-default bg-transparent",type:"button","data-bs-toggle":"collapse","data-bs-target":"#flush-collapseGroup","aria-expanded":"false","aria-controls":"flush-collapseGroup"}," 題材 ")],-1),lt={id:"flush-collapseGroup",class:"accordion-collapse collapse","data-bs-parent":"#accordionFlushGroup"},rt={class:"accordion-body px-0 py-0"},at={class:"list-unstyled","aria-labelledby":"btnGroupFilter"},dt=["onClick"],ct={class:"accordion-item bg-transparent"},pt=t("h2",{class:"accordion-header"},[t("button",{class:"accordion-button collapsed px-0 text-default bg-transparent",type:"button","data-bs-toggle":"collapse","data-bs-target":"#flush-collapseArtist","aria-expanded":"false","aria-controls":"flush-collapseArtist"}," 藝術家 ")],-1),ut={id:"flush-collapseArtist",class:"accordion-collapse collapse","data-bs-parent":"#accordionFlushArtist"},ft={class:"accordion-body px-0 py-0"},ht={class:"list-unstyled","aria-labelledby":"btnArtistFilter"},bt=["onClick"],mt={class:"position-absolute start-0 bottom-0 bg-primary p-4 w-100"};function gt(a,s,d,r,o,i){return n(),l(u,null,[t("nav",T,[t("div",F,[t("div",Z,[t("ul",j,[t("li",null,[t("div",G,[O,t("ul",q,[t("li",null,[t("a",{class:c(["dropdown-item p-3",o.filterRules.sort==="newest"?"bg-secondary":""]),href:"#",onClick:s[0]||(s[0]=p(e=>i.filterShow(["sort","newest"]),["prevent"]))},"最新藝術家",2)]),t("li",null,[t("a",{class:c(["dropdown-item p-3",o.filterRules.sort==="nameAToZ"?"bg-secondary":""]),href:"#",onClick:s[1]||(s[1]=p(e=>i.filterShow(["sort","nameAToZ"]),["prevent"]))},"姓名：A - Z",2)]),t("li",null,[t("a",{class:c(["dropdown-item p-3",o.filterRules.sort==="nameZToA"?"bg-secondary":""]),href:"#",onClick:s[2]||(s[2]=p(e=>i.filterShow(["sort","nameZToA"]),["prevent"]))},"姓名：Z - A",2)])])])]),t("li",null,[t("div",z,[M,t("ul",E,[(n(!0),l(u,null,h(d.groupList.artistGroupList,e=>(n(),l("li",{key:e},[t("a",{class:c(["dropdown-item p-3",o.filterRules.group===e?"bg-secondary":""]),href:"#",onClick:p(f=>i.filterShow(["group",e]),["prevent"])},b(e),11,I)]))),128))])])]),t("li",null,[t("div",B,[U,t("ul",V,[(n(!0),l(u,null,h(d.allArtists,e=>(n(),l("li",{key:e.id},[t("a",{class:c(["dropdown-item p-3",o.filterRules.title===e.title?"bg-secondary":""]),href:"#",onClick:p(f=>i.filterShow(["title",e.title]),["prevent"])},b(e.title),11,$)]))),128))])])])]),Object.keys(o.filterRules).length?(n(),l("button",{key:0,class:"btn btn-outline-default rounded-0 fs-info",type:"button",onClick:s[3]||(s[3]=e=>i.filterShow())},"清空篩選")):m("",!0)]),t("div",D,[t("ul",J,[t("li",null,[t("div",W,[Y,t("ul",H,[t("li",null,[t("a",{class:c(["dropdown-item p-3",o.filterRules.sort==="newest"?"bg-secondary":""]),href:"#",onClick:s[4]||(s[4]=p(e=>i.filterShow(["sort","newest"]),["prevent"]))},"最新藝術家",2)]),t("li",null,[t("a",{class:c(["dropdown-item p-3",o.filterRules.sort==="nameAToZ"?"bg-secondary":""]),href:"#",onClick:s[5]||(s[5]=p(e=>i.filterShow(["sort","nameAToZ"]),["prevent"]))},"姓名：A - Z",2)]),t("li",null,[t("a",{class:c(["dropdown-item p-3",o.filterRules.sort==="nameZToA"?"bg-secondary":""]),href:"#",onClick:s[6]||(s[6]=p(e=>i.filterShow(["sort","nameZToA"]),["prevent"]))},"姓名：Z - A",2)])])])]),t("li",null,[t("button",{type:"button",class:"btn d-flex align-items-center px-5 py-4 text-default fs-info border-0","aria-controls":"offcanvasFilterNav",onClick:s[7]||(s[7]=(...e)=>i.openMobileNav&&i.openMobileNav(...e))},X)])]),Object.keys(o.filterRules).length?(n(),l("button",{key:0,class:"btn btn-outline-default rounded-0 fs-info",type:"button",onClick:s[8]||(s[8]=e=>i.filterShow())},"清空篩選")):m("",!0)])])]),t("div",tt,[et,t("div",st,[t("ul",ot,[t("li",it,[nt,t("div",lt,[t("div",rt,[t("ul",at,[(n(!0),l(u,null,h(d.groupList.artistGroupList,e=>(n(),l("li",{key:e},[t("a",{class:c(["d-block p-3 text-info",o.filterRules.group===e?"fw-bold text-decoration-underline":""]),href:"#",onClick:p(f=>i.filterShow(["group",e]),["prevent"]),"data-bs-dismiss":"offcanvas"},b(e),11,dt)]))),128))])])])]),t("li",ct,[pt,t("div",ut,[t("div",ft,[t("ul",ht,[(n(!0),l(u,null,h(d.allArtists,e=>(n(),l("li",{key:e.id},[t("a",{class:c(["d-block p-3 text-info",o.filterRules.title===e.title?"fw-bold text-decoration-underline":""]),href:"#",onClick:p(f=>i.filterShow(["title",e.title]),["prevent"]),"data-bs-dismiss":"offcanvas"},b(e.title),11,bt)]))),128))])])])])])]),t("div",mt,[Object.keys(o.filterRules).length?(n(),l("button",{key:0,class:"btn btn-outline-default rounded-0 fs-info w-100",type:"button",onClick:s[9]||(s[9]=e=>i.filterShow())},"清空篩選")):m("",!0)])],512)],64)}const _t=y(R,[["render",gt]]),vt={data(){return{artistList:[],tempArtistList:[],pagination:{pageSize:12,total_pages:1,current_page:1},screenWidth:null}},methods:{...A(v,["getAllProducts"]),filterShow(a){const{sort:s,...d}=a;let r=this.sortNewest.newestArtist;Object.entries(d).forEach(([o,i])=>{i===""||i===void 0||(r=r.filter(e=>e[o]===i))}),s==="newest"?r=r.sort((o,i)=>i.create_at-o.create_at):s==="nameAToZ"?r=r.sort((o,i)=>o.title.localeCompare(i.title)):s==="nameZToA"&&(r=r.sort((o,i)=>i.title.localeCompare(o.title))),this.artistList=r,this.getList()},getPaginationInfo(){this.pagination.total_pages=Math.ceil(this.artistList.length/this.pagination.pageSize),this.pagination.has_pre=this.pagination.current_page!==1,this.pagination.has_next=this.pagination.total_pages>this.pagination.current_page},getList(a=this.pagination.current_page){this.pagination.current_page=a,this.getPaginationInfo();const s=(a-1)*this.pagination.pageSize,d=s+this.pagination.pageSize;this.tempArtistList=this.artistList.slice(s,d);const r={...this.$route.query};r.current_page=a;const o=Object.entries(r).map(i=>i.join("=")).join("&");this.$router.push(`artistlist?${o}`),this.backToTop()},backToTop(){document.body.scrollTop=0,document.documentElement.scrollTop=0},initPageContent(){this.pagination.current_page=+this.$route.query.current_page||1;const a={sort:this.$route.query.sort,group:this.$route.query.group,title:this.$route.query.title};this.filterShow(a)}},watch:{$route(){this.initPageContent()}},async mounted(){await this.getAllProducts(),this.initPageContent()},computed:{...k(v,["allArtists","sortNewest","groupList"])},components:{UserNavArtistFilter:_t,ProductCard:N,PaginationComponent:P}},wt={class:"container user-product-page-container flex-grow-1"},yt=t("h2",{class:"mb-7 mb-md-8 h1 lh-sm title-letter-spacing text-center h1"},"藝術家",-1),xt={key:0,class:"text-center fs-4"},At=t("span",{class:"d-block d-md-inline"},"請「清空篩選」重新選取",-1),kt={key:1,class:"row g-3 g-md-8"};function Ct(a,s,d,r,o,i){const e=_("UserNavArtistFilter"),f=_("ProductCard"),x=_("PaginationComponent");return n(),l(u,null,[w(e,{allArtists:a.allArtists,groupList:a.groupList,onFilterShow:i.filterShow},null,8,["allArtists","groupList","onFilterShow"]),t("div",wt,[yt,o.tempArtistList.length?(n(),l("div",kt,[(n(!0),l(u,null,h(o.tempArtistList,g=>(n(),l("div",{class:"col-6 col-md-4",key:g.id},[w(f,{item:g,linkTo:`/artistInfo/${g.id}`,showPrice:!1,showFavorite:!1,shape:"rounded-circle",titlePosition:"text-center"},null,8,["item","linkTo"])]))),128))])):(n(),l("p",xt,[S("沒有對應的藝術家，"),At])),o.tempArtistList.length?(n(),L(x,{key:2,pagination:o.pagination,onGetList:i.getList},null,8,["pagination","onGetList"])):m("",!0)])],64)}const Ht=y(vt,[["render",Ct]]);export{Ht as default};
