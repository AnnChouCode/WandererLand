import{u as m}from"./adminOrderStore-CnhCIokM.js";import{b}from"./pinia-MbC3oHy8.js";import{P as g}from"./PaginationComponent-UCP-GM0T.js";import{_ as x}from"./index--Ez_MJjB.js";import{a_ as B,aR as o,a5 as i,a6 as t,L as y,aY as C,ae as w,ad as k,ba as l}from"./@vue-RtdEgFn9.js";import"./axios-xY6ymfx7.js";import"./sweetalert2-ZSPr1-be.js";import"./@ckeditor-15bwuaMj.js";import"./vue-ogx55dXw.js";import"./vue-loading-overlay-6MyPOO4d.js";import"./vue-axios-1bbP-7uc.js";import"./vue-sweetalert2-HUKuUMJw.js";import"./vee-validate-O19HqbHO.js";import"./@vee-validate-Akla6Y1w.js";import"./bootstrap-HkqsEQF2.js";import"./@popperjs-kvWuk1nc.js";/* empty css                        */import"./aos-n3b4jLc5.js";import"./vue-router-RDvB-lrw.js";var O={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"wandererland",BASE_URL:"/WandererLand/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const d=m(),{VITE_API:p,VITE_PATH:h}=O,L={data(){return{currentOrderList:[],pagination:{},swalQuestionWithBootstrapButtons:null,swalInfoCheckWithBootstrapButtons:null}},methods:{async getCurrentOrderList(n=1){await d.getCurrentOrderList(n),this.currentOrderList=d.currentOrderList,this.pagination=d.pagination},showOrder(n){this.$router.push(`/admin/orderinfo/${n}`)},deleteOrder(n){let a=`${p}/api/${h}/admin/orders/all`,c='確定要刪除<span class="text-danger">全部</span>訂單嗎？';n!=="all"&&(a=`${p}/api/${h}/admin/order/${n}`,c=`確定要刪除訂單 <p><span class="text-danger">${n}</span> 嗎？</p>`),this.swalQuestionWithBootstrapButtons.fire({title:c,text:"請再次確認，以免影響顧客權益",icon:"question",showCancelButton:!0,cancelButtonText:"取消",confirmButtonText:"確認刪除"}).then(u=>{if(u.isConfirmed){const r=this.$loading.show();this.axios.delete(a).then(s=>{this.swalInfoCheckWithBootstrapButtons.fire({title:s.data.message,confirmButtonText:"確認"}),this.getCurrentOrderList()}).catch(s=>{this.swalInfoCheckWithBootstrapButtons.fire({icon:"error",text:s.response.data.message,confirmButtonText:"確認"})}).finally(()=>{r.hide()})}})}},computed:{...b(m)},components:{PaginationComponent:g},mounted(){this.getCurrentOrderList(),this.swalQuestionWithBootstrapButtons=this.$swal.mixin({customClass:{confirmButton:"m-1 btn btn-outline-default",cancelButton:"m-1 btn btn-default"},buttonsStyling:!1}),this.swalInfoCheckWithBootstrapButtons=this.$swal.mixin({customClass:{confirmButton:"m-1 btn btn-default"},buttonsStyling:!1})}},v={class:"overflow-y-scroll scrollbar-y-hide vh-100"},T={class:"d-flex justify-content-between py-4 py-md-7"},$=t("h2",{class:"fw-bold"},"訂單管理",-1),S={key:0,class:"py-5 text-center"},I={key:1,class:"table align-middle table-sm fs-info fs-md-6"},P=t("thead",null,[t("tr",null,[t("th",null,"訂單編號"),t("th",{class:"d-none d-md-table-cell text-center"},"訂單時間"),t("th",{class:"d-none d-lg-table-cell text-center"},"客戶姓名"),t("th",{class:"text-nowrap"},[k("訂單"),t("span",{class:"d-block d-sm-inline"},"狀態")]),t("th",{class:"d-none d-lg-table-cell text-center"},"總金額"),t("th")])],-1),E={class:"d-none d-md-table-cell text-center"},V={class:"d-none d-lg-table-cell text-center"},W={key:0,class:"text-warningh"},A={key:1,class:"text-danger"},D={key:2,class:"text-info"},N={class:"d-none d-lg-table-cell text-end"},R={class:"btn-group align-items-center"},Q=["onClick"],G=t("i",{class:"bi bi-eye text-default"},null,-1),H=[G],j=["onClick"],q=t("i",{class:"bi bi-trash text-danger"},null,-1),F=[q];function M(n,a,c,u,r,s){const _=B("PaginationComponent");return o(),i("div",v,[t("div",T,[$,t("button",{type:"button",class:"btn btn-dark",onClick:a[0]||(a[0]=e=>s.deleteOrder("all"))},"清除全部訂單")]),t("div",null,[r.currentOrderList.length?(o(),i("table",I,[P,t("tbody",null,[(o(!0),i(y,null,C(r.currentOrderList,e=>(o(),i("tr",{key:e.id},[t("td",null,l(e.id),1),t("td",E,l(new Date(e.create_at*1e3).toLocaleDateString()),1),t("td",V,l(e.user.name),1),t("td",null,[e.is_paid?e.is_paid&&!e.is_shipping?(o(),i("span",A,"待出貨")):(o(),i("span",D,"已完成")):(o(),i("span",W,"未付款"))]),t("td",N,"NT$ "+l(e.total.toLocaleString()),1),t("td",null,[t("div",R,[t("button",{type:"button",class:"btn border-0",onClick:f=>s.showOrder(e.id)},H,8,Q),t("button",{type:"button",class:"btn border-0",onClick:f=>s.deleteOrder(e.id)},F,8,j)])])]))),128))])])):(o(),i("p",S,"目前沒有訂單")),w(_,{pagination:r.pagination,onGetList:s.getCurrentOrderList},null,8,["pagination","onGetList"])])])}const pt=x(L,[["render",M]]);export{pt as default};
