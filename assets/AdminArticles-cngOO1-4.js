import{p as b}from"./paginationComponent-rfchPhAr.js";import{_ as B,r as u,o as s,c as o,a as t,b as h,w as x,H as w,I as C,d as y,G as c}from"./index-RWP2R7I8.js";var A={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"wandererland",BASE_URL:"/WandererLand/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API:_,VITE_PATH:p}=A,k={data(){return{currentArticles:[],pagination:{},isNew:!1,swalQuestionWithBootstrapButtons:null,swalInfoCheckWithBootstrapButtons:null}},methods:{getCurrentArticles(i=1){const a=`${_}/api/${p}/admin/articles?page=${i}`;this.axios.get(a).then(l=>{const{articles:r,pagination:e}=l.data;this.currentArticles=r,this.pagination=e,console.log(this.currentArticles)}).catch(l=>{this.swalInfoCheckWithBootstrapButtons.fire({icon:"error",text:l.response.data.message,confirmButtonText:"確認"})})},showArticlePage(i){this.$router.push(`/admin/articleinfo/${i}`)},deleteArticle(i){const a=`${_}/api/${p}/admin/article/${i}`;this.swalQuestionWithBootstrapButtons.fire({title:"確定要刪除文章嗎？",text:"這個動作無法復原",icon:"question",showCancelButton:!0,cancelButtonText:"取消",confirmButtonText:"確認刪除"}).then(l=>{if(l.isConfirmed){const r=this.$loading.show();this.axios.delete(a).then(e=>{this.swalInfoCheckWithBootstrapButtons.fire({title:e.data.message,confirmButtonText:"確認"}),this.getCurrentArticles()}).catch(e=>{this.swalInfoCheckWithBootstrapButtons.fire({icon:"error",text:e.response.data.message,confirmButtonText:"確認"})}).finally(()=>{r.hide()})}})}},components:{paginationComponent:b},mounted(){this.getCurrentArticles(),this.swalQuestionWithBootstrapButtons=this.$swal.mixin({customClass:{confirmButton:"m-1 btn btn-outline-default",cancelButton:"m-1 btn btn-default"},buttonsStyling:!1}),this.swalInfoCheckWithBootstrapButtons=this.$swal.mixin({customClass:{confirmButton:"m-1 btn btn-default"},buttonsStyling:!1})}},v={class:"overflow-y-scroll scrollbar-y-hide vh-100"},I={class:"d-flex justify-content-between py-4 py-md-7"},T=t("h2",{class:"fw-bold"},"文章管理",-1),$={key:0,class:"py-5 text-center"},W={key:1,class:"table align-middle fs-info fs-md-6"},E=t("thead",null,[t("tr",null,[t("th",null,"標題"),t("th",null,"分類"),t("th",null,"狀態"),t("th",{class:"d-none d-lg-table-cell"},"作者"),t("th",{class:"d-none d-md-table-cell"},"撰寫日期"),t("th")])],-1),P={class:"py-1 rounded-pill bg-light text-center text-nowrap"},V={key:0,class:"text-danger text-nowrap"},S={key:1},D={class:"d-none d-lg-table-cell"},L={class:"d-none d-md-table-cell"},N={class:"btn-group align-items-center"},G=["onClick"],H=t("i",{class:"bi bi-pencil text-default"},null,-1),Q=[H],R=["onClick"],O=t("i",{class:"bi bi-trash text-danger"},null,-1),j=[O];function q(i,a,l,r,e,d){const f=u("router-link"),m=u("paginationComponent");return s(),o("div",v,[t("div",I,[T,h(f,{to:"/admin/articleinfo/new",class:"btn btn-dark"},{default:x(()=>[y("建立文章")]),_:1})]),t("div",null,[e.currentArticles.length?(s(),o("table",W,[E,t("tbody",null,[(s(!0),o(w,null,C(e.currentArticles,n=>(s(),o("tr",{key:n.id},[t("td",null,c(n.title),1),t("td",null,[t("p",P,c(n.category),1)]),t("td",null,[n.isPublic?(s(),o("span",V,"發佈中")):(s(),o("span",S,"未發佈"))]),t("td",D,c(n.author),1),t("td",L,c(new Date(n.create_at*1e3).toLocaleDateString()),1),t("td",null,[t("div",N,[t("button",{type:"button",class:"btn border-0",onClick:g=>d.showArticlePage(n.id)},Q,8,G),t("button",{type:"button",class:"btn border-0",onClick:g=>d.deleteArticle(n.id)},j,8,R)])])]))),128))])])):(s(),o("p",$,"目前沒有文章")),h(m,{pagination:e.pagination,onGetList:d.getCurrentArticles},null,8,["pagination","onGetList"])])])}const U=B(k,[["render",q]]);export{U as default};
