import{u as m}from"./userProductStore-FybF7KXO.js";import{_ as y,O as S,o as n,c as l,b as t,n as c,l as u,F as p,d as h,t as b,h as _,m as L,a as k,r as v,e as w}from"./index-bOPoBINP.js";import{P as C}from"./ProductCard-Z7mdY8Tx.js";import{P}from"./PaginationComponent-M67KsjYY.js";import"./sweetalert2.all-4uUzy6sD.js";import"./BtnFavorite-10B7bR-N.js";import"./favoriteStore-aj8FewU2.js";import"./statusStore-_-BqXVCt.js";const z={data(){return{filterRules:{},mobileNav:null}},props:["allArtists","groupList","productSizeList"],methods:{filterShow(a){if(a){const[o,d]=a;this.filterRules[o]=d,this.filterRules.current_page=1;const r=`${Object.entries(this.filterRules).map(i=>i.join("=")).join("&")}`;this.$router.push(`/productList?${r}`);return}this.filterRules={},this.$router.push("/productList")},openMobileNav(){this.mobileNav.show()},closeMobileNav(){this.mobileNav.hide()}},mounted(){this.mobileNav=new S(this.$refs.mobileNav),this.filterRules=JSON.parse(JSON.stringify(this.$route.query)),delete this.filterRules.current_page}},N={class:"fixed-top z-1 bg-tertiary nav-product-filter w-100"},R={class:"container"},F={class:"d-none d-lg-flex align-items-center"},A={class:"d-flex align-items-center list-unstyled"},T={class:"dropdown"},j=t("button",{type:"button",class:"btn d-flex align-items-center px-5 py-4 text-default fs-info border-0",id:"btnProductSort","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("span",{class:"me-3"},"排序"),t("i",{class:"bi bi-chevron-down"})],-1),G={class:"dropdown-menu p-0 rounded-0","aria-labelledby":"btnProductSort"},H={class:"dropdown"},O=t("button",{type:"button",class:"btn d-flex align-items-center px-5 py-4 text-default fs-info border-0",id:"btnSizeFilter","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("span",{class:"me-3"},"尺寸"),t("i",{class:"bi bi-chevron-down"})],-1),q={class:"dropdown-menu p-0 overflow-y-scroll rounded-0 dropdown-scrollbar","aria-labelledby":"btnSizeFilter"},M=["onClick"],E={class:"dropdown"},I=t("button",{type:"button",class:"btn d-flex align-items-center px-5 py-4 text-default fs-info border-0",id:"btnGroupFilter","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("span",{class:"me-3"},"題材"),t("i",{class:"bi bi-chevron-down"})],-1),U={class:"dropdown-menu p-0 overflow-y-scroll rounded-0 dropdown-scrollbar","aria-labelledby":"btnGroupFilter"},B=["onClick"],D={class:"dropdown"},V=t("button",{type:"button",class:"btn d-flex align-items-center px-5 py-4 text-default fs-info border-0",id:"btnArtistFilter","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("span",{class:"me-3"},"藝術家"),t("i",{class:"bi bi-chevron-down"})],-1),J={class:"dropdown-menu p-0 overflow-y-scroll rounded-0 dropdown-scrollbar","aria-labelledby":"btnArtistFilter"},W=["onClick"],$={class:"d-flex d-lg-none align-items-center justify-content-between"},K={class:"d-flex align-items-center list-unstyled"},Q={class:"dropdown"},X=t("button",{type:"button",class:"btn d-flex align-items-center px-5 py-4 text-default fs-info border-0",id:"btnProductSort","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("span",{class:"me-3"},"排序"),t("i",{class:"bi bi-chevron-down"})],-1),Y={class:"dropdown-menu p-0 rounded-0","aria-labelledby":"btnProductSort"},Z=t("span",{class:"me-3"},"篩選",-1),tt=t("i",{class:"bi bi-chevron-down"},null,-1),et=[Z,tt],st={class:"offcanvas offcanvas-start bg-primary",tabindex:"-1",id:"offcanvasNav","aria-labelledby":"offcanvasNavLabel",ref:"mobileNav"},ot=t("div",{class:"offcanvas-header"},[t("h5",{class:"offcanvas-title",id:"offcanvasNavLabel"},"WANDERER LAND"),t("button",{type:"button",class:"btn-close text-reset","data-bs-dismiss":"offcanvas","aria-label":"Close"})],-1),it={class:"offcanvas-body"},nt={class:"d-flex flex-column gap-3 gap-sm-5 list-unstyled accordion accordion-flush",id:"accordionFlushFilter"},lt={class:"accordion-item bg-transparent"},rt=t("h2",{class:"accordion-header"},[t("button",{class:"accordion-button collapsed px-0 text-default bg-transparent",type:"button","data-bs-toggle":"collapse","data-bs-target":"#flush-collapseSize","aria-expanded":"false","aria-controls":"flush-collapseSize"}," 尺寸 ")],-1),at={id:"flush-collapseSize",class:"accordion-collapse collapse","data-bs-parent":"#accordionFlushSize"},dt={class:"accordion-body px-0 py-0"},ct={class:"list-unstyled","aria-labelledby":"btnSizeFilter"},ut=["onClick"],pt={class:"accordion-item bg-transparent"},ft=t("h2",{class:"accordion-header"},[t("button",{class:"accordion-button collapsed px-0 text-default bg-transparent",type:"button","data-bs-toggle":"collapse","data-bs-target":"#flush-collapseGroup","aria-expanded":"false","aria-controls":"flush-collapseGroup"}," 題材 ")],-1),ht={id:"flush-collapseGroup",class:"accordion-collapse collapse","data-bs-parent":"#accordionFlushGroup"},bt={class:"accordion-body px-0 py-0"},gt={class:"list-unstyled","aria-labelledby":"btnGroupFilter"},_t=["onClick"],vt={class:"accordion-item bg-transparent"},wt=t("h2",{class:"accordion-header"},[t("button",{class:"accordion-button collapsed px-0 text-default bg-transparent",type:"button","data-bs-toggle":"collapse","data-bs-target":"#flush-collapseArtist","aria-expanded":"false","aria-controls":"flush-collapseArtist"}," 藝術家 ")],-1),mt={id:"flush-collapseArtist",class:"accordion-collapse collapse","data-bs-parent":"#accordionFlushArtist"},yt={class:"accordion-body px-0 py-0"},xt={class:"list-unstyled","aria-labelledby":"btnArtistFilter"},St=["onClick"],Lt={class:"position-absolute start-0 bottom-0 bg-primary p-4 w-100"};function kt(a,o,d,r,i,s){return n(),l(p,null,[t("nav",N,[t("div",R,[t("div",F,[t("ul",A,[t("li",null,[t("div",T,[j,t("ul",G,[t("li",null,[t("a",{class:c(["dropdown-item p-3",i.filterRules.sort==="newest"?"bg-secondary":""]),href:"#",onClick:o[0]||(o[0]=u(e=>s.filterShow(["sort","newest"]),["prevent"]))},"最新作品",2)]),t("li",null,[t("a",{class:c(["dropdown-item p-3",i.filterRules.sort==="priceHighToLow"?"bg-secondary":""]),href:"#",onClick:o[1]||(o[1]=u(e=>s.filterShow(["sort","priceHighToLow"]),["prevent"]))},"價格：高至低",2)]),t("li",null,[t("a",{class:c(["dropdown-item p-3",i.filterRules.sort==="priceLowToHigh"?"bg-secondary":""]),href:"#",onClick:o[2]||(o[2]=u(e=>s.filterShow(["sort","priceLowToHigh"]),["prevent"]))},"價格：低至高",2)])])])]),t("li",null,[t("div",H,[O,t("ul",q,[(n(!0),l(p,null,h(d.productSizeList,e=>(n(),l("li",{key:e},[t("a",{class:c(["dropdown-item p-3",i.filterRules.size===e?"bg-secondary":""]),href:"#",onClick:u(f=>s.filterShow(["size",e]),["prevent"])},b(e),11,M)]))),128))])])]),t("li",null,[t("div",E,[I,t("ul",U,[(n(!0),l(p,null,h(d.groupList.productGroupList,e=>(n(),l("li",{key:e},[t("a",{class:c(["dropdown-item p-3",i.filterRules.group===e?"bg-secondary":""]),href:"#",onClick:u(f=>s.filterShow(["group",e]),["prevent"])},b(e),11,B)]))),128))])])]),t("li",null,[t("div",D,[V,t("ul",J,[(n(!0),l(p,null,h(d.allArtists,e=>(n(),l("li",{key:e.id},[t("a",{class:c(["dropdown-item p-3",i.filterRules.artist===e.title?"bg-secondary":""]),href:"#",onClick:u(f=>s.filterShow(["artist",e.title]),["prevent"])},b(e.title),11,W)]))),128))])])])]),Object.keys(i.filterRules).length?(n(),l("button",{key:0,class:"btn btn-outline-default rounded-0 fs-info",type:"button",onClick:o[3]||(o[3]=e=>s.filterShow())},"清空篩選")):_("",!0)]),t("div",$,[t("ul",K,[t("li",null,[t("div",Q,[X,t("ul",Y,[t("li",null,[t("a",{class:c(["dropdown-item p-3",i.filterRules.sort==="newest"?"bg-secondary":""]),href:"#",onClick:o[4]||(o[4]=u(e=>s.filterShow(["sort","newest"]),["prevent"]))},"最新作品",2)]),t("li",null,[t("a",{class:c(["dropdown-item p-3",i.filterRules.sort==="priceHighToLow"?"bg-secondary":""]),href:"#",onClick:o[5]||(o[5]=u(e=>s.filterShow(["sort","priceHighToLow"]),["prevent"]))},"價格：高至低",2)]),t("li",null,[t("a",{class:c(["dropdown-item p-3",i.filterRules.sort==="priceLowToHigh"?"bg-secondary":""]),href:"#",onClick:o[6]||(o[6]=u(e=>s.filterShow(["sort","priceLowToHigh"]),["prevent"]))},"價格：低至高",2)])])])]),t("li",null,[t("button",{type:"button",class:"btn d-flex align-items-center px-5 py-4 text-default fs-info border-0","aria-controls":"offcanvasFilterNav",onClick:o[7]||(o[7]=(...e)=>s.openMobileNav&&s.openMobileNav(...e))},et)])]),Object.keys(i.filterRules).length?(n(),l("button",{key:0,class:"btn btn-outline-default rounded-0 fs-info",type:"button",onClick:o[8]||(o[8]=e=>s.filterShow())},"清空篩選")):_("",!0)])])]),t("div",st,[ot,t("div",it,[t("ul",nt,[t("li",lt,[rt,t("div",at,[t("div",dt,[t("ul",ct,[(n(!0),l(p,null,h(d.productSizeList,e=>(n(),l("li",{key:e},[t("a",{class:c(["d-block p-3 text-info",i.filterRules.size===e?"fw-bold text-decoration-underline":""]),href:"#",onClick:u(f=>s.filterShow(["size",e]),["prevent"]),"data-bs-dismiss":"offcanvas"},b(e),11,ut)]))),128))])])])]),t("li",pt,[ft,t("div",ht,[t("div",bt,[t("ul",gt,[(n(!0),l(p,null,h(d.groupList.productGroupList,e=>(n(),l("li",{key:e},[t("a",{class:c(["d-block p-3 text-info",i.filterRules.group===e?"fw-bold text-decoration-underline":""]),href:"#",onClick:u(f=>s.filterShow(["group",e]),["prevent"]),"data-bs-dismiss":"offcanvas"},b(e),11,_t)]))),128))])])])]),t("li",vt,[wt,t("div",mt,[t("div",yt,[t("ul",xt,[(n(!0),l(p,null,h(d.allArtists,e=>(n(),l("li",{key:e.id},[t("a",{class:c(["d-block p-3 text-info",i.filterRules.artist===e.title?"fw-bold text-decoration-underline":""]),href:"#",onClick:u(f=>s.filterShow(["artist",e.title]),["prevent"]),"data-bs-dismiss":"offcanvas"},b(e.title),11,St)]))),128))])])])])])]),t("div",Lt,[Object.keys(i.filterRules).length?(n(),l("button",{key:0,class:"btn btn-outline-default rounded-0 fs-info w-100",type:"button",onClick:o[9]||(o[9]=e=>s.filterShow())},"清空篩選")):_("",!0)])],512)],64)}const Ct=y(z,[["render",kt]]),Pt={data(){return{productsList:[],tempProductsList:[],pagination:{pageSize:12,total_pages:1,current_page:1},screenWidth:null}},methods:{...L(m,["getAllProducts","getSizeList"]),filterShow(a){const{sort:o,...d}=a;let r=this.sortNewest.newestProduct;Object.entries(d).forEach(([i,s])=>{s!==void 0&&(r=r.filter(e=>e[i]===s))}),o==="newest"?r=r.sort((i,s)=>s.create_at-i.create_at):o==="priceHighToLow"?r=r.sort((i,s)=>s.price-i.price):o==="priceLowToHigh"&&(r=r.sort((i,s)=>i.price-s.price)),this.productsList=r,this.getList()},getPaginationInfo(){this.pagination.total_pages=Math.ceil(this.productsList.length/this.pagination.pageSize),this.pagination.has_pre=this.pagination.current_page!==1,this.pagination.has_next=this.pagination.total_pages>this.pagination.current_page},getList(a=this.pagination.current_page){this.pagination.current_page=a,this.getPaginationInfo();const o=(a-1)*this.pagination.pageSize,d=o+this.pagination.pageSize;this.tempProductsList=this.productsList.slice(o,d);const r={...this.$route.query};r.current_page=a;const i=Object.entries(r).map(s=>s.join("=")).join("&");this.$router.push(`productlist?${i}`),this.backToTop()},backToTop(){document.body.scrollTop=0,document.documentElement.scrollTop=0},initPageContent(){this.pagination.current_page=+this.$route.query.current_page||1;const a={sort:this.$route.query.sort,artist:this.$route.query.artist,group:this.$route.query.group,size:this.$route.query.size};this.filterShow(a)}},watch:{$route(){this.initPageContent()}},async mounted(){await this.getAllProducts(),this.initPageContent(),this.getSizeList()},computed:{...k(m,["allArtists","sortNewest","groupList","productSizeList"])},components:{UserNavProductFilter:Ct,ProductCard:C,PaginationComponent:P}},zt={class:"container user-product-page-container flex-grow-1"},Nt=t("h2",{class:"mb-7 mb-md-8 h1 lh-sm title-letter-spacing text-center h1"},"作品",-1),Rt={class:"row g-3 g-md-8 mb-5"};function Ft(a,o,d,r,i,s){const e=v("UserNavProductFilter"),f=v("ProductCard"),x=v("PaginationComponent");return n(),l(p,null,[w(e,{allArtists:a.allArtists,groupList:a.groupList,productSizeList:a.productSizeList,onFilterShow:s.filterShow},null,8,["allArtists","groupList","productSizeList","onFilterShow"]),t("div",zt,[Nt,t("div",Rt,[(n(!0),l(p,null,h(i.tempProductsList,g=>(n(),l("div",{class:"col-6 col-md-4",key:g.id},[w(f,{item:g,linkTo:`/productInfo/${g.id}`,showPrice:!0,showFavorite:!0},null,8,["item","linkTo"])]))),128))]),w(x,{pagination:i.pagination,onGetList:s.getList},null,8,["pagination","onGetList"])])],64)}const Et=y(Pt,[["render",Ft]]);export{Et as default};
