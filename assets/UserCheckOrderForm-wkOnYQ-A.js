import{c as u}from"./userCartStore-lRPWsDKf.js";import{_ as b,m as _,a as g,r as n,o as v,i as V,f as x,b as o,e as t,n as i}from"./index-xxmhpSli.js";import"./statusStore-Kr_WM3ql.js";import"./sweetalert2.all-AGo5aliO.js";var w={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"wandererland",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API:B,VITE_PATH:E}=w,k={data(){return{form:{user:{email:"",tel:"",address:""},message:""}}},methods:{..._(u,["getCartsList"]),checkOrder(){const f=this.$loading.show(),e=`${B}/api/${E}/order`,c={data:this.form};this.axios.post(e,c).then(r=>{this.swalInfoCheckWithBootstrapButtons.fire({title:`<p> ${r.data.message}</p><p>訂單編號 </p><p>${r.data.orderId}</p>`,confirmButtonText:"確認"}),this.$refs.form.resetForm(),this.getCartsList(),this.$router.push(`/order/payorder/${r.data.orderId}`)}).catch(r=>{this.swalInfoCheckWithBootstrapButtons.fire({icon:"error",text:r.response.data.message,confirmButtonText:"確認"})}).finally(()=>{f.hide()})}},mounted(){this.getCartsList(),this.swalInfoCheckWithBootstrapButtons=this.$swal.mixin({customClass:{confirmButton:"m-1 btn btn-default"},buttonsStyling:!1})},computed:{...g(u,["cartsList"])}},y={class:"mb-4 mb-md-7 form-floating w-100"},C=o("label",{for:"Email",class:"form-label has-required"},"Email",-1),I={class:"mb-4 mb-md-7 form-floating w-100"},q=o("label",{for:"name",class:"form-label has-required"},"收件人姓名",-1),S={class:"mb-4 mb-md-7 form-floating w-100"},T=o("label",{for:"tel",class:"form-label has-required"},"收件人電話",-1),U={class:"mb-4 mb-md-7 form-floating w-100"},A=o("label",{for:"address",class:"form-label has-required"},"收件人地址",-1),L={class:"mb-4 mb-md-7 form-floating w-100"},O=o("label",{for:"message",class:"form-label"},"留言",-1),P=o("button",{class:"py-2 py-md-3 px-6 px-md-9 btn btn-default fw-bold rounded-0 w-100 w-md-auto",type:"submit"}," 訂單確認 ",-1);function D(f,e,c,r,s,p){const a=n("v-field"),m=n("error-message"),h=n("v-form");return v(),V(h,{ref:"form",class:"d-flex flex-column align-items-end",onSubmit:p.checkOrder},{default:x(({errors:d})=>[o("div",y,[t(a,{id:"email",name:"Email",type:"email",class:i(["form-control border-info rounded-0",{"is-invalid":d.Email}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:s.form.user.email,"onUpdate:modelValue":e[0]||(e[0]=l=>s.form.user.email=l)},null,8,["class","modelValue"]),t(m,{name:"Email",class:"invalid-feedback"}),C]),o("div",I,[t(a,{id:"name",name:"姓名",type:"text",class:i(["form-control border-info rounded-0",{"is-invalid":d.姓名}]),placeholder:"請輸入姓名",rules:"required",modelValue:s.form.user.name,"onUpdate:modelValue":e[1]||(e[1]=l=>s.form.user.name=l)},null,8,["class","modelValue"]),t(m,{name:"姓名",class:"invalid-feedback"}),q]),o("div",S,[t(a,{id:"tel",name:"電話",type:"tel",class:i(["form-control border-info rounded-0",{"is-invalid":d.電話}]),placeholder:"請輸入電話",rules:"required|min:8|max:10",modelValue:s.form.user.tel,"onUpdate:modelValue":e[2]||(e[2]=l=>s.form.user.tel=l)},null,8,["class","modelValue"]),t(m,{name:"電話",class:"invalid-feedback"}),T]),o("div",U,[t(a,{id:"address",name:"地址",type:"text",class:i(["form-control border-info rounded-0",{"is-invalid":d.地址}]),placeholder:"請輸入地址",rules:"required",modelValue:s.form.user.address,"onUpdate:modelValue":e[3]||(e[3]=l=>s.form.user.address=l)},null,8,["class","modelValue"]),t(m,{name:"地址",class:"invalid-feedback"}),A]),o("div",L,[t(a,{id:"message",name:"message",class:"form-control border-info rounded-0",cols:"30",rows:"10",modelValue:s.form.message,"onUpdate:modelValue":e[4]||(e[4]=l=>s.form.message=l),as:"textarea",placeholder:"請輸入您的留言",style:{height:"273px"}},null,8,["modelValue"]),O]),P]),_:1},8,["onSubmit"])}const N=b(k,[["render",D]]);export{N as default};
