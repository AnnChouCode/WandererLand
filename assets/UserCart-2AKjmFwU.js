import{c as p}from"./userCartStore-KupHVh2R.js";import{_ as m,m as w,b as v,o as n,c as a,d as t,F as f,k as h,s as b,v as y,t as d,u as g,p as x,l as C}from"./index-NJccFmJx.js";import"./sweetalert2.all-XXveUhGL.js";var k={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"wandererland",BASE_URL:"/WandererLand/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API:L,VITE_PATH:B}=k,S={data(){return{coupon:"",toastState:!0,doAction:null}},methods:{...w(p,["getCartsList","updateCart","deleteCartItem","checkCoupon"]),clearCartsList(){this.swalQuestionWithBootstrapButtons.fire({title:"確定要清空購物車嗎？",icon:"question",text:"這個動作無法復原",showCancelButton:!0,cancelButtonText:"取消",confirmButtonText:"確認更改"}).then(o=>{if(o.isConfirmed){const l=this.$loading.show(),_=`${L}/api/${B}/carts`;this.axios.delete(_).then(i=>{this.swalInfoCheckWithBootstrapButtons.fire({title:i.data.message,confirmButtonText:"確認"}),this.getCartsList()}).catch(i=>this.swalInfoCheckWithBootstrapButtons.fire({icon:"error",text:i.response.data.message,confirmButtonText:"確認"})).finally(()=>{l.hide()})}})},checkOrder(){this.$router.push("/order/checkform")}},mounted(){this.getCartsList(),this.swalQuestionWithBootstrapButtons=this.$swal.mixin({customClass:{confirmButton:"m-1 btn btn-outline-default",cancelButton:"m-1 btn btn-default"},buttonsStyling:!1}),this.swalInfoCheckWithBootstrapButtons=this.$swal.mixin({customClass:{confirmButton:"m-1 btn btn-default"},buttonsStyling:!1})},computed:{...v(p,["cartsList"])}},c=o=>(x("data-v-2827e08d"),o=o(),C(),o),T={class:"container user-page-container flex-grow-1"},I=c(()=>t("h2",{class:"mb-7 mb-md-8 h1 lh-sm title-letter-spacing text-center h1"},"購物車",-1)),$={key:0,class:"text-center"},V={key:1,class:"position-relative"},E=["disabled"],q={class:"table mb-4 mb-md-5"},A=c(()=>t("thead",null,[t("tr",{class:"fs-info fs-md-6"},[t("th",{scope:"col",style:{"padding-left":"0"}}),t("th",{scope:"col",class:"fw-bold"},[t("span",{class:"d-none d-md-block"},"商品")]),t("th",{scope:"col",class:"d-none d-md-table-cell fw-bold"},"單價"),t("th",{scope:"col",class:"fw-bold"},"數量"),t("th",{scope:"col",class:"fw-bold"},"總計")])],-1)),N={scope:"row",class:"w-auto w-md-15",style:{"padding-left":"0"}},U=["onClick"],W=c(()=>t("i",{class:"bi bi-x fs-4"},null,-1)),D=[W],O={class:"d-flex gap-3 gap-md-5"},P={style:{"max-width":"107px"},class:"ratio-1x1"},M=["src","alt"],R={style:{"max-width":"286px","min-width":"90px"},class:"d-flex flex-column"},j={class:"flex-grow-1"},F={class:"mb-1 fw-bold fs-info fs-md-6"},H={class:"d-none d-md-block fs-info text-info fw-light"},Q={class:"fs-info fs-md-6"},z={class:"d-none d-md-table-cell fs-info fs-md-6"},G={class:"fs-info fs-md-6"},J=["onUpdate:modelValue","onChange"],K=["selected","value"],X=["selected","value"],Y={class:"fs-info fs-md-6"},Z={class:"row g-6 justify-content-between"},tt={class:"col-12 col-md-5 col-lg-4"},st={class:"row"},ot={class:"col-6"},et={class:"border-bottom border-default h-100"},lt={class:"col-6"},dt=["disabled"],nt={class:"col-12 col-md-5"},at={class:"border-bottom border-default"},ct={class:"row mb-4"},it=c(()=>t("div",{class:"col fw-bold"},"總計",-1)),rt={class:"col text-end fw-bold"},ut={class:"row mb-4 mb-md-6"},ft=c(()=>t("div",{class:"col fw-bold"},"折扣",-1)),ht={class:"col text-end fw-bold"},_t={class:"row py-4 py-md-7"},pt=c(()=>t("div",{class:"col fw-bold fs-6 fs-md-5"},"結帳金額",-1)),bt={class:"col text-end fw-bold fs-6 fs-md-5"},mt=["disabled"];function wt(o,l,_,i,u,r){return n(),a("div",T,[I,o.cartsList.final_total?(n(),a("div",V,[t("button",{class:"position-absolute top-0 start-0 btn btn-primary rounded-0 fs-info text-info",type:"button",onClick:l[0]||(l[0]=(...s)=>r.clearCartsList&&r.clearCartsList(...s)),disabled:!o.cartsList.final_total},"清空購物車",8,E),t("table",q,[A,t("tbody",null,[(n(!0),a(f,null,h(o.cartsList.carts,s=>(n(),a("tr",{key:s.id},[t("th",N,[t("button",{type:"button",class:"btn px-0",onClick:e=>o.deleteCartItem(s.id)},D,8,U)]),t("td",null,[t("div",O,[t("div",P,[t("img",{src:s.product.imageUrl,alt:s.product.title,class:"w-100 h-100 object-fit-contain",style:{"min-width":"20px"}},null,8,M)]),t("div",R,[t("div",j,[t("h3",F,d(s.product.title),1),t("p",H,d(s.product.artist),1)]),t("p",Q,d(s.product.size),1)])])]),t("td",z," NT$ "+d(s.product.origin_price.toLocaleString()),1),t("td",G,[b(t("select",{class:"form-select form-select-sm rounded-0 border-default fs-info fs-md-6","aria-label":".form-select-sm example",style:{width:"65px"},"onUpdate:modelValue":e=>s.qty=e,onChange:e=>o.updateCart(s)},[s.product.quantity?(n(!0),a(f,{key:0},h(s.product.quantity,e=>(n(),a("option",{key:e,selected:e===s.qty,value:e},d(e),9,K))),128)):(n(),a(f,{key:1},h(99,e=>t("option",{key:e,selected:e===s.qty,value:e},d(e),9,X)),64))],40,J),[[g,s.qty,void 0,{number:!0}]])]),t("td",Y," NT$ "+d(s.final_total.toLocaleString()),1)]))),128))])]),t("div",Z,[t("div",tt,[t("div",st,[t("div",ot,[t("div",et,[b(t("input",{type:"text",placeholder:"請輸入優惠碼",class:"form-control border-0 text-center h-100","onUpdate:modelValue":l[1]||(l[1]=s=>u.coupon=s)},null,512),[[y,u.coupon,void 0,{trim:!0}]])])]),t("div",lt,[t("button",{class:"py-3 btn btn-outline-default rounded-0 w-100",type:"button",disabled:!o.cartsList.final_total,onClick:l[2]||(l[2]=s=>o.checkCoupon(u.coupon))},"輸入優惠券",8,dt)])])]),t("div",nt,[t("div",at,[t("div",ct,[it,t("div",rt,"NT$ "+d(o.cartsList.total.toLocaleString()),1)]),t("div",ut,[ft,t("div",ht,"- NT$ "+d((o.cartsList.total-o.cartsList.final_total).toLocaleString()),1)])]),t("div",_t,[pt,t("div",bt,"NT$ "+d(o.cartsList.final_total.toLocaleString()),1)]),t("button",{type:"button",class:"py-2 py-md-3 btn btn-default rounded-0 fw-bold w-100",onClick:l[3]||(l[3]=(...s)=>r.checkOrder&&r.checkOrder(...s)),disabled:!o.cartsList.final_total},"送出訂單",8,mt)])])])):(n(),a("p",$,"目前購物車內沒有內容"))])}const xt=m(S,[["render",wt],["__scopeId","data-v-2827e08d"]]);export{xt as default};
