import{c as v}from"./cartStore-AdnRZFv4.js";import{L as $,M as C,m as _,g as I,_ as m,o as n,c as r,O as b,Q as A,a as t,H as f,I as P,G as d,r as g,b as h,R as E}from"./index-RWP2R7I8.js";import{s as T}from"./sweetalert2.all-W_WOX3G1.js";import{p as S}from"./paginationComponent-rfchPhAr.js";var V={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"wandererland",BASE_URL:"/WandererLand/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API:k,VITE_PATH:x}=V,p=$("allProductsStore",{state:()=>({allProducts:[],categoryList:[]}),actions:{getAllProducts(){const o=`${k}/api/${x}/products/all`;C.get(o).then(e=>{this.allProducts=e.data.products,this.getCategoryList()}).catch(e=>{T.fire({icon:"error",text:e.response.data.message})})},getCategoryList(){const o=new Set(this.allProducts.map(e=>e.category));this.categoryList=[...o]}}}),w={data(){return{currentCategory:""}},watch:{currentCategory(){this.$emit("getProductList",1,this.currentCategory)}},methods:{..._(p,["getAllProducts"])},computed:{...I(p,["allProducts","categoryList"])}},D=t("label",{for:"category",class:"me-3"},"產品分類篩選",-1),R=t("option",{value:""},"全部",-1),H=["value"];function B(o,e,u,l,a,c){return n(),r("div",null,[D,b(t("select",{name:"category",id:"category","onUpdate:modelValue":e[0]||(e[0]=i=>a.currentCategory=i)},[R,(n(!0),r(f,null,P(o.categoryList,i=>(n(),r("option",{value:i,key:i},d(i),9,H))),128))],512),[[A,a.currentCategory]])])}const G=m(w,[["render",B]]);var O={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"wandererland",BASE_URL:"/WandererLand/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API:U,VITE_PATH:M}=O,z={data(){return{productsList:[],pagination:{}}},methods:{..._(v,["addToCart"]),..._(p,["getAllProducts"]),getProductList(o=1,e){let u=`${U}/api/${M}/products?page=${o}`;e&&(u+=`&category=${e}`),this.axios.get(u).then(l=>{const{products:a,pagination:c}=l.data;this.productsList=a,this.pagination=c}).catch(l=>{this.$swal.fire({icon:"error",text:l.response.data.message})})},showProductInfo(o){this.$router.push(`/productinfo/${o}`)}},mounted(){this.getProductList(),this.getAllProducts()},components:{paginationComponent:S,filterCategory:G}},N={class:"container"},W=t("h2",{class:"py-5 h2 text-center"},"看產品",-1),F={class:"table align-middle"},Q=t("thead",null,[t("tr",null,[t("th",null,"圖片"),t("th",null,"商品名稱"),t("th",null,"價格"),t("th")])],-1),j={style:{width:"200px"}},q={key:0,class:"h5"},J={key:1},K={class:"h6"},X={class:"h5"},Y={class:"btn-group btn-group-sm"},Z=["onClick"],tt=["onClick"];function et(o,e,u,l,a,c){const i=g("filterCategory"),y=g("paginationComponent");return n(),r("div",N,[W,h(i,{onGetProductList:c.getProductList},null,8,["onGetProductList"]),t("table",F,[Q,t("tbody",null,[(n(!0),r(f,null,P(a.productsList,s=>(n(),r("tr",{key:s.id},[t("td",j,[t("div",{style:E([{height:"100px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${s.imageUrl})`}])},null,4)]),t("td",null,d(s.title),1),t("td",null,[s.price?(n(),r("div",J,[t("del",K,"原價 "+d(s.origin_price)+" 元",1),t("div",X,"現在只要 "+d(s.price)+" 元",1)])):(n(),r("div",q,d(s.origin_price)+" 元",1))]),t("td",null,[t("div",Y,[t("button",{type:"button",class:"btn btn-outline-default",onClick:L=>c.showProductInfo(s.id)}," 查看更多 ",8,Z),t("button",{type:"button",class:"btn btn-default",onClick:L=>o.addToCart(s.id,1)}," 加到購物車 ",8,tt)])])]))),128))])]),h(y,{pagination:a.pagination,onGetList:c.getProductList},null,8,["pagination","onGetList"])])}const at=m(z,[["render",et]]);export{at as default};
