import{u as i,x as o}from"./index-XGQmqWAH.js";import{s as r}from"./statusStore-rkGp4Hxn.js";var a={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"wandererland",BASE_URL:"/WandererLand/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API:c,VITE_PATH:n}=a,d=i("favoriteStore",{state:()=>({favoriteList:[],recentlyProducts:[],favoriteProducts:[]}),actions:{handleFavorite(t){const e=this.favoriteList.indexOf(t);e===-1?this.favoriteList.push(t):this.favoriteList.splice(e,1),this.setStorage();const{addMsg:s}=r();s("bi-info-circle","收藏已更新")},setStorage(){localStorage.setItem("favoriteList",this.favoriteList)},getFavoriteList(){const t=localStorage.getItem("favoriteList");t&&(this.favoriteList=t.split(","))},recentlyViewed(t){const e=this.recentlyProducts.findIndex(s=>s.id===t.id);e===-1?(this.recentlyProducts.unshift(t),this.recentlyProducts.length>=8&&this.recentlyProducts.pop()):(this.recentlyProducts.splice(e,1),this.recentlyProducts.unshift(t)),localStorage.setItem("recentlyList",JSON.stringify(this.recentlyProducts))},getFavoriteProducts(){this.favoriteProducts=[],this.favoriteList.forEach(t=>{const e=`${c}/api/${n}/product/${t}`;o.get(e).then(s=>this.favoriteProducts.push(s.data.product)).catch(s=>console.log(s.response.data.message))})}}});export{d as f};
