import{u as y}from"./userProductStore-Gql_CpFX.js";import{_ as x,O as k,o as i,c as r,b as t,n as c,l as u,F as f,d as _,t as h,h as v,m as L,a as C,r as w,e as g,f as m}from"./index-ve_Xq-xX.js";import{b as z}from"./btnFavorite-EJtak_ca.js";import"./sweetalert2.all-BgGBYvA-.js";import"./favoriteStore-cpJzn4bg.js";import"./statusStore-IhAkOzHO.js";const F={data(){return{filterRules:{},mobileNav:null}},props:["allArtists","groupList","productSizeList"],methods:{filterShow(n){if(n){const[s,a]=n;this.filterRules[s]=a;const d=Object.entries(this.filterRules).map(l=>l.join("=")).join("&");this.$router.push(`/productList?${d}`);return}this.filterRules={},this.$router.push("/productList")},openMobileNav(){this.mobileNav.show()},closeMobileNav(){this.mobileNav.hide()}},mounted(){this.mobileNav=new k(this.$refs.mobileNav);const n=window.location.href.split("?")[1];if(!n){this.filterRules={};return}n.split("&").forEach(s=>{const a=s.split("=");this.filterRules[a[0]]=a[1]})}},N={class:"fixed-top z-1 bg-tertiary nav-product-filter w-100"},R={class:"container"},A={class:"d-none d-lg-flex align-items-center"},P={class:"d-flex align-items-center list-unstyled"},j={class:"dropdown"},T=t("button",{type:"button",class:"btn d-flex align-items-center px-5 py-4 text-default fs-info border-0",id:"btnProductSort","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("span",{class:"me-3"},"排序"),t("i",{class:"bi bi-chevron-down"})],-1),$={class:"dropdown-menu p-0 rounded-0","aria-labelledby":"btnProductSort"},H={class:"dropdown"},G=t("button",{type:"button",class:"btn d-flex align-items-center px-5 py-4 text-default fs-info border-0",id:"btnSizeFilter","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("span",{class:"me-3"},"尺寸"),t("i",{class:"bi bi-chevron-down"})],-1),q={class:"dropdown-menu p-0 overflow-y-scroll rounded-0 dropdown-scrollbar","aria-labelledby":"btnSizeFilter"},O=["onClick"],E={class:"dropdown"},M=t("button",{type:"button",class:"btn d-flex align-items-center px-5 py-4 text-default fs-info border-0",id:"btnGroupFilter","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("span",{class:"me-3"},"題材"),t("i",{class:"bi bi-chevron-down"})],-1),I={class:"dropdown-menu p-0 overflow-y-scroll rounded-0 dropdown-scrollbar","aria-labelledby":"btnGroupFilter"},B=["onClick"],D={class:"dropdown"},U=t("button",{type:"button",class:"btn d-flex align-items-center px-5 py-4 text-default fs-info border-0",id:"btnArtistFilter","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("span",{class:"me-3"},"藝術家"),t("i",{class:"bi bi-chevron-down"})],-1),V={class:"dropdown-menu p-0 overflow-y-scroll rounded-0 dropdown-scrollbar","aria-labelledby":"btnArtistFilter"},W=["onClick"],J={class:"d-flex d-lg-none align-items-center justify-content-between"},K={class:"d-flex align-items-center list-unstyled"},Q={class:"dropdown"},X=t("button",{type:"button",class:"btn d-flex align-items-center px-5 py-4 text-default fs-info border-0",id:"btnProductSort","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("span",{class:"me-3"},"排序"),t("i",{class:"bi bi-chevron-down"})],-1),Y={class:"dropdown-menu p-0 rounded-0","aria-labelledby":"btnProductSort"},Z=t("span",{class:"me-3"},"篩選",-1),tt=t("i",{class:"bi bi-chevron-down"},null,-1),et=[Z,tt],st={class:"offcanvas offcanvas-start bg-primary",tabindex:"-1",id:"offcanvasNav","aria-labelledby":"offcanvasNavLabel",ref:"mobileNav"},ot=t("div",{class:"offcanvas-header"},[t("h5",{class:"offcanvas-title",id:"offcanvasNavLabel"},"WANDERER LAND"),t("button",{type:"button",class:"btn-close text-reset","data-bs-dismiss":"offcanvas","aria-label":"Close"})],-1),lt={class:"offcanvas-body"},it={class:"d-flex flex-column gap-3 gap-sm-5 list-unstyled accordion accordion-flush",id:"accordionFlushFilter"},rt={class:"accordion-item bg-transparent"},nt=t("h2",{class:"accordion-header"},[t("button",{class:"accordion-button collapsed px-0 text-default bg-transparent",type:"button","data-bs-toggle":"collapse","data-bs-target":"#flush-collapseSize","aria-expanded":"false","aria-controls":"flush-collapseSize"}," 尺寸 ")],-1),at={id:"flush-collapseSize",class:"accordion-collapse collapse","data-bs-parent":"#accordionFlushSize"},dt={class:"accordion-body px-0 py-0"},ct={class:"list-unstyled","aria-labelledby":"btnSizeFilter"},ut=["onClick"],pt={class:"accordion-item bg-transparent"},ft=t("h2",{class:"accordion-header"},[t("button",{class:"accordion-button collapsed px-0 text-default bg-transparent",type:"button","data-bs-toggle":"collapse","data-bs-target":"#flush-collapseGroup","aria-expanded":"false","aria-controls":"flush-collapseGroup"}," 題材 ")],-1),bt={id:"flush-collapseGroup",class:"accordion-collapse collapse","data-bs-parent":"#accordionFlushGroup"},ht={class:"accordion-body px-0 py-0"},_t={class:"list-unstyled","aria-labelledby":"btnGroupFilter"},gt=["onClick"],vt={class:"accordion-item bg-transparent"},wt=t("h2",{class:"accordion-header"},[t("button",{class:"accordion-button collapsed px-0 text-default bg-transparent",type:"button","data-bs-toggle":"collapse","data-bs-target":"#flush-collapseArtist","aria-expanded":"false","aria-controls":"flush-collapseArtist"}," 藝術家 ")],-1),yt={id:"flush-collapseArtist",class:"accordion-collapse collapse","data-bs-parent":"#accordionFlushArtist"},mt={class:"accordion-body px-0 py-0"},xt={class:"list-unstyled","aria-labelledby":"btnArtistFilter"},St=["onClick"],kt={class:"position-absolute start-0 bottom-0 bg-primary p-4 w-100"};function Lt(n,s,a,d,l,o){return i(),r(f,null,[t("nav",N,[t("div",R,[t("div",A,[t("ul",P,[t("li",null,[t("div",j,[T,t("ul",$,[t("li",null,[t("a",{class:c(["dropdown-item p-3",l.filterRules.sort==="newest"?"bg-secondary":""]),href:"#",onClick:s[0]||(s[0]=u(e=>o.filterShow(["sort","newest"]),["prevent"]))},"最新作品",2)]),t("li",null,[t("a",{class:c(["dropdown-item p-3",l.filterRules.sort==="priceHighToLow"?"bg-secondary":""]),href:"#",onClick:s[1]||(s[1]=u(e=>o.filterShow(["sort","priceHighToLow"]),["prevent"]))},"價格：高至低",2)]),t("li",null,[t("a",{class:c(["dropdown-item p-3",l.filterRules.sort==="priceLowToHigh"?"bg-secondary":""]),href:"#",onClick:s[2]||(s[2]=u(e=>o.filterShow(["sort","priceLowToHigh"]),["prevent"]))},"價格：低至高",2)])])])]),t("li",null,[t("div",H,[G,t("ul",q,[(i(!0),r(f,null,_(a.productSizeList,e=>(i(),r("li",{key:e},[t("a",{class:c(["dropdown-item p-3",l.filterRules.size===e?"bg-secondary":""]),href:"#",onClick:u(b=>o.filterShow(["size",e]),["prevent"])},h(e),11,O)]))),128))])])]),t("li",null,[t("div",E,[M,t("ul",I,[(i(!0),r(f,null,_(a.groupList.productGroupList,e=>(i(),r("li",{key:e},[t("a",{class:c(["dropdown-item p-3",l.filterRules.group===e?"bg-secondary":""]),href:"#",onClick:u(b=>o.filterShow(["group",e]),["prevent"])},h(e),11,B)]))),128))])])]),t("li",null,[t("div",D,[U,t("ul",V,[(i(!0),r(f,null,_(a.allArtists,e=>(i(),r("li",{key:e.id},[t("a",{class:c(["dropdown-item p-3",l.filterRules.artist===e.title?"bg-secondary":""]),href:"#",onClick:u(b=>o.filterShow(["artist",e.title]),["prevent"])},h(e.title),11,W)]))),128))])])])]),Object.keys(l.filterRules).length?(i(),r("button",{key:0,class:"btn btn-outline-default rounded-0 fs-info",type:"button",onClick:s[3]||(s[3]=e=>o.filterShow())},"清空篩選")):v("",!0)]),t("div",J,[t("ul",K,[t("li",null,[t("div",Q,[X,t("ul",Y,[t("li",null,[t("a",{class:c(["dropdown-item p-3",l.filterRules.sort==="newest"?"bg-secondary":""]),href:"#",onClick:s[4]||(s[4]=u(e=>o.filterShow(["sort","newest"]),["prevent"]))},"最新作品",2)]),t("li",null,[t("a",{class:c(["dropdown-item p-3",l.filterRules.sort==="priceHighToLow"?"bg-secondary":""]),href:"#",onClick:s[5]||(s[5]=u(e=>o.filterShow(["sort","priceHighToLow"]),["prevent"]))},"價格：高至低",2)]),t("li",null,[t("a",{class:c(["dropdown-item p-3",l.filterRules.sort==="priceLowToHigh"?"bg-secondary":""]),href:"#",onClick:s[6]||(s[6]=u(e=>o.filterShow(["sort","priceLowToHigh"]),["prevent"]))},"價格：低至高",2)])])])]),t("li",null,[t("button",{type:"button",class:"btn d-flex align-items-center px-5 py-4 text-default fs-info border-0","aria-controls":"offcanvasFilterNav",onClick:s[7]||(s[7]=(...e)=>o.openMobileNav&&o.openMobileNav(...e))},et)])]),Object.keys(l.filterRules).length?(i(),r("button",{key:0,class:"btn btn-outline-default rounded-0 fs-info",type:"button",onClick:s[8]||(s[8]=e=>o.filterShow())},"清空篩選")):v("",!0)])])]),t("div",st,[ot,t("div",lt,[t("ul",it,[t("li",rt,[nt,t("div",at,[t("div",dt,[t("ul",ct,[(i(!0),r(f,null,_(a.productSizeList,e=>(i(),r("li",{key:e},[t("a",{class:c(["d-block p-3 text-info",l.filterRules.size===e?"fw-bold text-decoration-underline":""]),href:"#",onClick:u(b=>o.filterShow(["size",e]),["prevent"]),"data-bs-dismiss":"offcanvas"},h(e),11,ut)]))),128))])])])]),t("li",pt,[ft,t("div",bt,[t("div",ht,[t("ul",_t,[(i(!0),r(f,null,_(a.groupList.productGroupList,e=>(i(),r("li",{key:e},[t("a",{class:c(["d-block p-3 text-info",l.filterRules.group===e?"fw-bold text-decoration-underline":""]),href:"#",onClick:u(b=>o.filterShow(["group",e]),["prevent"]),"data-bs-dismiss":"offcanvas"},h(e),11,gt)]))),128))])])])]),t("li",vt,[wt,t("div",yt,[t("div",mt,[t("ul",xt,[(i(!0),r(f,null,_(a.allArtists,e=>(i(),r("li",{key:e.id},[t("a",{class:c(["d-block p-3 text-info",l.filterRules.artist===e.title?"fw-bold text-decoration-underline":""]),href:"#",onClick:u(b=>o.filterShow(["artist",e.title]),["prevent"]),"data-bs-dismiss":"offcanvas"},h(e.title),11,St)]))),128))])])])])])]),t("div",kt,[Object.keys(l.filterRules).length?(i(),r("button",{key:0,class:"btn btn-outline-default rounded-0 fs-info w-100",type:"button",onClick:s[9]||(s[9]=e=>o.filterShow())},"清空篩選")):v("",!0)])],512)],64)}const Ct=x(F,[["render",Lt]]),zt={data(){return{productsList:[]}},methods:{...L(y,["getAllProducts","getSizeList"]),filterShow(n){const{sort:s,...a}=n;let d=this.sortNewest.newestProduct;Object.entries(a).forEach(([l,o])=>{o!==void 0&&(d=d.filter(e=>e[l]===o))}),s==="newest"?d=d.sort((l,o)=>o.create_at-l.create_at):s==="priceHighToLow"?d=d.sort((l,o)=>o.price-l.price):s==="priceLowToHigh"&&(d=d.sort((l,o)=>l.price-o.price)),this.productsList=d}},watch:{$route(){const n={sort:this.$route.query.sort,artist:this.$route.query.artist,group:this.$route.query.group,size:this.$route.query.size};this.filterShow(n)}},async mounted(){await this.getAllProducts();const n={sort:this.$route.query.sort,artist:this.$route.query.artist,group:this.$route.query.group,size:this.$route.query.size};this.filterShow(n),this.getSizeList()},computed:{...C(y,["allArtists","sortNewest","groupList","productSizeList"])},components:{btnFavorite:z,userNavProductFilter:Ct}},Ft={class:"container user-product-page-container flex-grow-1"},Nt=t("h2",{class:"mb-7 mb-md-8 h1 lh-sm title-letter-spacing text-center h1"},"作品",-1),Rt={class:"row g-3 g-md-8"},At={class:"position-relative d-flex justify-content-center align-items-center ratio-1x1 overflow-hidden product-img"},Pt=["src","alt"],jt=["src"],Tt={class:"py-3 px-0 px-md-4"},$t={class:"mb-2 fs-info fs-md-5 fw-bold text-default"},Ht={class:"d-flex justify-content-between align-items-center"},Gt={class:"fs-info fs-md-6 text-info"};function qt(n,s,a,d,l,o){const e=w("userNavProductFilter"),b=w("router-link"),S=w("btnFavorite");return i(),r(f,null,[g(e,{allArtists:n.allArtists,groupList:n.groupList,productSizeList:n.productSizeList,onFilterShow:o.filterShow},null,8,["allArtists","groupList","productSizeList","onFilterShow"]),t("div",Ft,[Nt,t("div",Rt,[(i(!0),r(f,null,_(l.productsList,p=>(i(),r("div",{class:"col-6 col-md-4",key:p.id},[g(b,{to:`productInfo/${p.id}`},{default:m(()=>[t("div",At,[t("img",{src:p.imageUrl,alt:p.title,class:"object-fit-contain w-100 h-100 product-img-up"},null,8,Pt),t("img",{src:p.imagesUrl[0],alt:"item.title",class:"position-absolute z-n1 object-fit-contain w-100 h-100 product-img-down"},null,8,jt)])]),_:2},1032,["to"]),t("div",Tt,[g(b,{to:`productInfo/${p.id}`},{default:m(()=>[t("h3",$t,h(p.title),1)]),_:2},1032,["to"]),t("div",Ht,[t("p",Gt,"NT$ "+h(p.price.toLocaleString()),1),g(S,{productId:p.id},null,8,["productId"])])])]))),128))])])],64)}const Ut=x(zt,[["render",qt]]);export{Ut as default};
