import{u as v}from"./userProductStore-xUui2-DW.js";import{_ as m,O as x,o as r,c as i,b as t,n as c,l as u,F as p,d as b,t as h,h as w,m as S,a as k,r as g,e as y}from"./index-_2WDdkJc.js";import{p as L}from"./productCard-4r0TB1MT.js";import"./sweetalert2.all-h07hFVJ6.js";import"./btnFavorite-knQfUpps.js";import"./favoriteStore-tezHI_6_.js";import"./statusStore-Grw3YlXP.js";const C={data(){return{filterRules:{},mobileNav:null}},props:["allArtists","groupList","productSizeList"],methods:{filterShow(n){if(n){const[s,a]=n;this.filterRules[s]=a;const d=Object.entries(this.filterRules).map(l=>l.join("=")).join("&");this.$router.push(`/productList?${d}`);return}this.filterRules={},this.$router.push("/productList")},openMobileNav(){this.mobileNav.show()},closeMobileNav(){this.mobileNav.hide()}},mounted(){this.mobileNav=new x(this.$refs.mobileNav);const n=window.location.href.split("?")[1];if(!n){this.filterRules={};return}n.split("&").forEach(s=>{const a=s.split("=");this.filterRules[a[0]]=a[1]})}},z={class:"fixed-top z-1 bg-tertiary nav-product-filter w-100"},N={class:"container"},F={class:"d-none d-lg-flex align-items-center"},R={class:"d-flex align-items-center list-unstyled"},A={class:"dropdown"},P=t("button",{type:"button",class:"btn d-flex align-items-center px-5 py-4 text-default fs-info border-0",id:"btnProductSort","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("span",{class:"me-3"},"排序"),t("i",{class:"bi bi-chevron-down"})],-1),T={class:"dropdown-menu p-0 rounded-0","aria-labelledby":"btnProductSort"},H={class:"dropdown"},G=t("button",{type:"button",class:"btn d-flex align-items-center px-5 py-4 text-default fs-info border-0",id:"btnSizeFilter","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("span",{class:"me-3"},"尺寸"),t("i",{class:"bi bi-chevron-down"})],-1),j={class:"dropdown-menu p-0 overflow-y-scroll rounded-0 dropdown-scrollbar","aria-labelledby":"btnSizeFilter"},q=["onClick"],O={class:"dropdown"},E=t("button",{type:"button",class:"btn d-flex align-items-center px-5 py-4 text-default fs-info border-0",id:"btnGroupFilter","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("span",{class:"me-3"},"題材"),t("i",{class:"bi bi-chevron-down"})],-1),M={class:"dropdown-menu p-0 overflow-y-scroll rounded-0 dropdown-scrollbar","aria-labelledby":"btnGroupFilter"},B=["onClick"],D={class:"dropdown"},V=t("button",{type:"button",class:"btn d-flex align-items-center px-5 py-4 text-default fs-info border-0",id:"btnArtistFilter","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("span",{class:"me-3"},"藝術家"),t("i",{class:"bi bi-chevron-down"})],-1),$={class:"dropdown-menu p-0 overflow-y-scroll rounded-0 dropdown-scrollbar","aria-labelledby":"btnArtistFilter"},I=["onClick"],U={class:"d-flex d-lg-none align-items-center justify-content-between"},W={class:"d-flex align-items-center list-unstyled"},J={class:"dropdown"},K=t("button",{type:"button",class:"btn d-flex align-items-center px-5 py-4 text-default fs-info border-0",id:"btnProductSort","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("span",{class:"me-3"},"排序"),t("i",{class:"bi bi-chevron-down"})],-1),Q={class:"dropdown-menu p-0 rounded-0","aria-labelledby":"btnProductSort"},X=t("span",{class:"me-3"},"篩選",-1),Y=t("i",{class:"bi bi-chevron-down"},null,-1),Z=[X,Y],tt={class:"offcanvas offcanvas-start bg-primary",tabindex:"-1",id:"offcanvasNav","aria-labelledby":"offcanvasNavLabel",ref:"mobileNav"},et=t("div",{class:"offcanvas-header"},[t("h5",{class:"offcanvas-title",id:"offcanvasNavLabel"},"WANDERER LAND"),t("button",{type:"button",class:"btn-close text-reset","data-bs-dismiss":"offcanvas","aria-label":"Close"})],-1),st={class:"offcanvas-body"},ot={class:"d-flex flex-column gap-3 gap-sm-5 list-unstyled accordion accordion-flush",id:"accordionFlushFilter"},lt={class:"accordion-item bg-transparent"},rt=t("h2",{class:"accordion-header"},[t("button",{class:"accordion-button collapsed px-0 text-default bg-transparent",type:"button","data-bs-toggle":"collapse","data-bs-target":"#flush-collapseSize","aria-expanded":"false","aria-controls":"flush-collapseSize"}," 尺寸 ")],-1),it={id:"flush-collapseSize",class:"accordion-collapse collapse","data-bs-parent":"#accordionFlushSize"},nt={class:"accordion-body px-0 py-0"},at={class:"list-unstyled","aria-labelledby":"btnSizeFilter"},dt=["onClick"],ct={class:"accordion-item bg-transparent"},ut=t("h2",{class:"accordion-header"},[t("button",{class:"accordion-button collapsed px-0 text-default bg-transparent",type:"button","data-bs-toggle":"collapse","data-bs-target":"#flush-collapseGroup","aria-expanded":"false","aria-controls":"flush-collapseGroup"}," 題材 ")],-1),pt={id:"flush-collapseGroup",class:"accordion-collapse collapse","data-bs-parent":"#accordionFlushGroup"},ft={class:"accordion-body px-0 py-0"},bt={class:"list-unstyled","aria-labelledby":"btnGroupFilter"},ht=["onClick"],_t={class:"accordion-item bg-transparent"},wt=t("h2",{class:"accordion-header"},[t("button",{class:"accordion-button collapsed px-0 text-default bg-transparent",type:"button","data-bs-toggle":"collapse","data-bs-target":"#flush-collapseArtist","aria-expanded":"false","aria-controls":"flush-collapseArtist"}," 藝術家 ")],-1),vt={id:"flush-collapseArtist",class:"accordion-collapse collapse","data-bs-parent":"#accordionFlushArtist"},gt={class:"accordion-body px-0 py-0"},yt={class:"list-unstyled","aria-labelledby":"btnArtistFilter"},mt=["onClick"],xt={class:"position-absolute start-0 bottom-0 bg-primary p-4 w-100"};function St(n,s,a,d,l,o){return r(),i(p,null,[t("nav",z,[t("div",N,[t("div",F,[t("ul",R,[t("li",null,[t("div",A,[P,t("ul",T,[t("li",null,[t("a",{class:c(["dropdown-item p-3",l.filterRules.sort==="newest"?"bg-secondary":""]),href:"#",onClick:s[0]||(s[0]=u(e=>o.filterShow(["sort","newest"]),["prevent"]))},"最新作品",2)]),t("li",null,[t("a",{class:c(["dropdown-item p-3",l.filterRules.sort==="priceHighToLow"?"bg-secondary":""]),href:"#",onClick:s[1]||(s[1]=u(e=>o.filterShow(["sort","priceHighToLow"]),["prevent"]))},"價格：高至低",2)]),t("li",null,[t("a",{class:c(["dropdown-item p-3",l.filterRules.sort==="priceLowToHigh"?"bg-secondary":""]),href:"#",onClick:s[2]||(s[2]=u(e=>o.filterShow(["sort","priceLowToHigh"]),["prevent"]))},"價格：低至高",2)])])])]),t("li",null,[t("div",H,[G,t("ul",j,[(r(!0),i(p,null,b(a.productSizeList,e=>(r(),i("li",{key:e},[t("a",{class:c(["dropdown-item p-3",l.filterRules.size===e?"bg-secondary":""]),href:"#",onClick:u(f=>o.filterShow(["size",e]),["prevent"])},h(e),11,q)]))),128))])])]),t("li",null,[t("div",O,[E,t("ul",M,[(r(!0),i(p,null,b(a.groupList.productGroupList,e=>(r(),i("li",{key:e},[t("a",{class:c(["dropdown-item p-3",l.filterRules.group===e?"bg-secondary":""]),href:"#",onClick:u(f=>o.filterShow(["group",e]),["prevent"])},h(e),11,B)]))),128))])])]),t("li",null,[t("div",D,[V,t("ul",$,[(r(!0),i(p,null,b(a.allArtists,e=>(r(),i("li",{key:e.id},[t("a",{class:c(["dropdown-item p-3",l.filterRules.artist===e.title?"bg-secondary":""]),href:"#",onClick:u(f=>o.filterShow(["artist",e.title]),["prevent"])},h(e.title),11,I)]))),128))])])])]),Object.keys(l.filterRules).length?(r(),i("button",{key:0,class:"btn btn-outline-default rounded-0 fs-info",type:"button",onClick:s[3]||(s[3]=e=>o.filterShow())},"清空篩選")):w("",!0)]),t("div",U,[t("ul",W,[t("li",null,[t("div",J,[K,t("ul",Q,[t("li",null,[t("a",{class:c(["dropdown-item p-3",l.filterRules.sort==="newest"?"bg-secondary":""]),href:"#",onClick:s[4]||(s[4]=u(e=>o.filterShow(["sort","newest"]),["prevent"]))},"最新作品",2)]),t("li",null,[t("a",{class:c(["dropdown-item p-3",l.filterRules.sort==="priceHighToLow"?"bg-secondary":""]),href:"#",onClick:s[5]||(s[5]=u(e=>o.filterShow(["sort","priceHighToLow"]),["prevent"]))},"價格：高至低",2)]),t("li",null,[t("a",{class:c(["dropdown-item p-3",l.filterRules.sort==="priceLowToHigh"?"bg-secondary":""]),href:"#",onClick:s[6]||(s[6]=u(e=>o.filterShow(["sort","priceLowToHigh"]),["prevent"]))},"價格：低至高",2)])])])]),t("li",null,[t("button",{type:"button",class:"btn d-flex align-items-center px-5 py-4 text-default fs-info border-0","aria-controls":"offcanvasFilterNav",onClick:s[7]||(s[7]=(...e)=>o.openMobileNav&&o.openMobileNav(...e))},Z)])]),Object.keys(l.filterRules).length?(r(),i("button",{key:0,class:"btn btn-outline-default rounded-0 fs-info",type:"button",onClick:s[8]||(s[8]=e=>o.filterShow())},"清空篩選")):w("",!0)])])]),t("div",tt,[et,t("div",st,[t("ul",ot,[t("li",lt,[rt,t("div",it,[t("div",nt,[t("ul",at,[(r(!0),i(p,null,b(a.productSizeList,e=>(r(),i("li",{key:e},[t("a",{class:c(["d-block p-3 text-info",l.filterRules.size===e?"fw-bold text-decoration-underline":""]),href:"#",onClick:u(f=>o.filterShow(["size",e]),["prevent"]),"data-bs-dismiss":"offcanvas"},h(e),11,dt)]))),128))])])])]),t("li",ct,[ut,t("div",pt,[t("div",ft,[t("ul",bt,[(r(!0),i(p,null,b(a.groupList.productGroupList,e=>(r(),i("li",{key:e},[t("a",{class:c(["d-block p-3 text-info",l.filterRules.group===e?"fw-bold text-decoration-underline":""]),href:"#",onClick:u(f=>o.filterShow(["group",e]),["prevent"]),"data-bs-dismiss":"offcanvas"},h(e),11,ht)]))),128))])])])]),t("li",_t,[wt,t("div",vt,[t("div",gt,[t("ul",yt,[(r(!0),i(p,null,b(a.allArtists,e=>(r(),i("li",{key:e.id},[t("a",{class:c(["d-block p-3 text-info",l.filterRules.artist===e.title?"fw-bold text-decoration-underline":""]),href:"#",onClick:u(f=>o.filterShow(["artist",e.title]),["prevent"]),"data-bs-dismiss":"offcanvas"},h(e.title),11,mt)]))),128))])])])])])]),t("div",xt,[Object.keys(l.filterRules).length?(r(),i("button",{key:0,class:"btn btn-outline-default rounded-0 fs-info w-100",type:"button",onClick:s[9]||(s[9]=e=>o.filterShow())},"清空篩選")):w("",!0)])],512)],64)}const kt=m(C,[["render",St]]),Lt={data(){return{productsList:[]}},methods:{...S(v,["getAllProducts","getSizeList"]),filterShow(n){const{sort:s,...a}=n;let d=this.sortNewest.newestProduct;Object.entries(a).forEach(([l,o])=>{o!==void 0&&(d=d.filter(e=>e[l]===o))}),s==="newest"?d=d.sort((l,o)=>o.create_at-l.create_at):s==="priceHighToLow"?d=d.sort((l,o)=>o.price-l.price):s==="priceLowToHigh"&&(d=d.sort((l,o)=>l.price-o.price)),this.productsList=d}},watch:{$route(){const n={sort:this.$route.query.sort,artist:this.$route.query.artist,group:this.$route.query.group,size:this.$route.query.size};this.filterShow(n)}},async mounted(){await this.getAllProducts();const n={sort:this.$route.query.sort,artist:this.$route.query.artist,group:this.$route.query.group,size:this.$route.query.size};this.filterShow(n),this.getSizeList()},computed:{...k(v,["allArtists","sortNewest","groupList","productSizeList"])},components:{userNavProductFilter:kt,productCard:L}},Ct={class:"container user-product-page-container flex-grow-1"},zt=t("h2",{class:"mb-7 mb-md-8 h1 lh-sm title-letter-spacing text-center h1"},"作品",-1),Nt={class:"row g-3 g-md-8"};function Ft(n,s,a,d,l,o){const e=g("userNavProductFilter"),f=g("productCard");return r(),i(p,null,[y(e,{allArtists:n.allArtists,groupList:n.groupList,productSizeList:n.productSizeList,onFilterShow:o.filterShow},null,8,["allArtists","groupList","productSizeList","onFilterShow"]),t("div",Ct,[zt,t("div",Nt,[(r(!0),i(p,null,b(l.productsList,_=>(r(),i("div",{class:"col-6 col-md-4",key:_.id},[y(f,{item:_,linkTo:`/productInfo/${_.id}`,showPrice:!0,showFavorite:!0},null,8,["item","linkTo"])]))),128))])])],64)}const qt=m(Lt,[["render",Ft]]);export{qt as default};
