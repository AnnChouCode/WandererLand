import{u as m}from"./userProductStore-gwIpGzqb.js";import{c as x}from"./cartStore-MpWcKVss.js";import{_ as I,m as b,h as P,r as w,o as i,c as r,b as t,I as h,J as v,g as p,H as a,d,w as _,L as S,e as k}from"./index-pzpS6pyO.js";import{b as O}from"./btnFavorite-Iobfidj_.js";import"./sweetalert2.all-yD-pxYGR.js";var T={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"wandererland",BASE_URL:"/WandererLand/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API:A,VITE_PATH:C}=T,N={data(){return{product:{},qty:1,relatedProducts:[],artistInfo:{}}},methods:{...b(m,["getAllProducts"]),...b(x,["addToCart"]),changeImage(o){this.product.currentImage=this.product.imagesStock[o]},getCurrentProduct(o){const n=`${A}/api/${C}/product/${o}`;return this.axios.get(n).then(l=>{const s=l.data.product;return this.product={productInfo:s,currentImage:s.imageUrl},s.imagesUrl&&(this.product.imagesStock=[s.imageUrl,...s.imagesUrl]),s.artist}).catch(l=>console.log(l.response.data.message))},getRelatedProducts(o,n){let l=this.sortNewest.newestProduct.filter(s=>s.artist===o&&s.id!==n);l.length||(l=this.sortNewest.newestProduct.filter(s=>s.group===this.product.productInfo.group)),this.relatedProducts=l.slice(0,3)},getArtistInfo(o){this.artistInfo=this.sortNewest.newestArtist.filter(n=>n.title===o)[0]}},async mounted(){try{const o=this.$route.params.id,n=await this.getCurrentProduct(o);await this.getAllProducts(),this.getRelatedProducts(n,o),this.getArtistInfo(n)}catch(o){throw console.log("錯誤:",o),o}},computed:{...P(m,["sortNewest"])},components:{btnFavorite:O}},V={key:0,class:"container user-page-container"},j={class:"row g-1 g-lg-6"},E={class:"col-12 col-md-8"},U={class:"row"},L={class:"position-relative col-12 col-lg-3"},B={class:"bg-tertiary h-100 overflow-hidden"},D={key:0,class:"position-lg-absolute row gap-0 gap-lg-2 px-2 py-2 py-lg-0 px-lg-auto flex-nowrap flex-lg-column overflow-auto scrollbar-y-hide w-lg-100 h-lg-100"},R=["onClick"],F=["src"],H={class:"col-12 col-lg-9 order-first order-lg-last flex-shrink-0 content"},q={class:"bg-tertiary ratio-1x1 overflow-hidden"},z=["src","alt"],M={class:"col-12 col-md-4"},J={class:"p-3 p-lg-7 mb-3 mb-md-6 bg-tertiary"},W={class:"d-flex justify-content-between align-items-start mb-5 mb-md-7"},G={class:"mb-2 h6 text-info fw-bold"},K={class:"h5 fw-bold"},Q={class:"lh-base lh-md-lg fs-info text-info"},X=t("hr",{class:"my-6 text-default"},null,-1),Y={class:"accordion accordion-flush",id:"accordionPanelsProductInfo"},Z={class:"accordion-item bg-transparent border-default"},$=t("h2",{class:"accordion-header",id:"panelsStayOpen-headingOne"},[t("button",{class:"accordion-button text-info fw-bold bg-transparent p-0",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseOne","aria-expanded":"true","aria-controls":"panelsStayOpen-collapseOne",style:{"box-shadow":"none"}}," 作品規格 ")],-1),tt={id:"panelsStayOpen-collapseOne",class:"accordion-collapse collapse show","aria-labelledby":"panelsStayOpen-headingOne"},ot={class:"accordion-body p-0 pt-4 lh-base lh-md-lg h6 text-info"},et=t("hr",{class:"my-6 text-default"},null,-1),st={class:"accordion accordion-flush",id:"accordionPanelsProductInfo"},nt={class:"accordion-item bg-transparent"},ct={class:"accordion-header",id:"panelsStayOpen-headingTwo"},it={class:"accordion-button text-info fw-bold bg-transparent p-0",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseTwo","aria-expanded":"true","aria-controls":"panelsStayOpen-collapseTwo",style:{"box-shadow":"none"}},rt={id:"panelsStayOpen-collapseTwo",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingOne"},at={class:"accordion-body p-0 pt-4 lh-base lh-md-lg fs-info text-info"},lt={key:1,class:"container"},dt={class:"py-7 py-md-9"},pt={class:"d-flex justify-content-between align-items-center mb-7 mb-md-8"},ut=t("h2",{class:"fs-2 fs-md-1"},"相似作品",-1),ht={class:"row g-3 g-md-8"},_t={class:"position-relative d-flex justify-content-center align-items-center ratio-1x1 overflow-hidden product-img"},ft=["src","alt"],gt=["src"],mt={class:"py-3 px-0 px-md-4"},bt={class:"mb-2 fs-info fs-md-5 fw-bold text-default"},wt={key:0,class:"d-flex justify-content-between align-items-center"},vt={class:"fs-info fs-md-6 text-info"};function yt(o,n,l,s,e,y){const f=w("btnFavorite"),u=w("router-link");return i(),r(h,null,[e.product.productInfo?(i(),r("div",V,[t("div",j,[t("div",E,[t("div",U,[t("div",L,[t("div",B,[e.product.imagesStock?(i(),r("div",D,[(i(!0),r(h,null,v(e.product.imagesStock,(c,g)=>(i(),r("a",{href:"#",class:"col-3 col-lg-12 ratio-1x1 overflow-hidden",key:"img"+g,onClick:S(xt=>y.changeImage(g),["prevent"])},[t("img",{src:c,alt:"product",class:"object-fit-contain w-100 h-100"},null,8,F)],8,R))),128))])):p("",!0)])]),t("div",H,[t("div",q,[t("img",{src:e.product.currentImage,alt:e.product.productInfo.title,class:"object-fit-contain w-100 h-100"},null,8,z)])])])]),t("div",M,[t("div",J,[t("div",W,[t("div",null,[t("h3",G,a(e.product.productInfo.artist),1),t("h2",K,a(e.product.productInfo.title),1)]),d(f)]),t("p",Q,a(e.product.productInfo.content),1),X,t("div",Y,[t("div",Z,[$,t("div",tt,[t("div",ot,a(e.product.productInfo.size),1)])])]),et,t("div",st,[t("div",nt,[t("h2",ct,[t("button",it," 關於 "+a(e.artistInfo.title),1)]),t("div",rt,[t("div",at,a(e.artistInfo.content),1)])])])]),t("button",{type:"button",class:"py-2 py-md-3 btn btn-default rounded-0 fw-bold w-100",onClick:n[0]||(n[0]=c=>o.addToCart(e.product.productInfo.id,e.qty))},"加入購物車．NT$ "+a(e.product.productInfo.price.toLocaleString()),1)])])])):p("",!0),e.relatedProducts.length?(i(),r("div",lt,[t("div",dt,[t("div",pt,[ut,d(u,{to:"/productlist",class:"text-default border-bottom border-default fw-bold fs-info fs-md-6"},{default:_(()=>[k("瀏覽更多")]),_:1})]),t("div",ht,[(i(!0),r(h,null,v(e.relatedProducts,c=>(i(),r("div",{class:"col-6 col-md-4",key:c.id},[d(u,{to:`/productinfo/${c.id}`},{default:_(()=>[t("div",_t,[t("img",{src:c.imageUrl,alt:c.title,class:"object-fit-contain w-100 h-100 product-img-up"},null,8,ft),t("img",{src:c.imagesUrl[0],alt:"item.title",class:"position-absolute z-n1 object-fit-contain w-100 h-100 product-img-down"},null,8,gt)])]),_:2},1032,["to"]),t("div",mt,[d(u,{to:`/productinfo/${c.id}`},{default:_(()=>[t("h3",bt,a(c.title),1)]),_:2},1032,["to"]),o.isArtistBlock?p("",!0):(i(),r("div",wt,[t("p",vt,"NT$ "+a(c.price.toLocaleString()),1),d(f)]))])]))),128))])])])):p("",!0)],64)}const Tt=I(N,[["render",yt]]);export{Tt as default};
