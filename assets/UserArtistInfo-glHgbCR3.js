import{u as g}from"./userProductStore-oDfMvsQ2.js";import{c as y}from"./cartStore-Duj5mUmN.js";import{_ as I,m as v,h as P,r as w,o as c,c as n,b as t,I as h,J as b,g as d,H as u,d as a,w as f,L as k,e as A}from"./index-WNumrVw8.js";import{b as S}from"./btnFavorite-so62hZBE.js";import"./sweetalert2.all-3UPPIVx5.js";var N={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"wandererland",BASE_URL:"/WandererLand/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API:T,VITE_PATH:V}=N,j={data(){return{product:{},qty:1,relatedProducts:[],artistInfo:{}}},methods:{...v(g,["getAllProducts"]),...v(y,["addToCart"]),changeImage(e){this.product.currentImage=this.product.imagesStock[e]},getCurrentProduct(e){const r=`${T}/api/${V}/product/${e}`;return this.axios.get(r).then(l=>{const o=l.data.product;return this.product={productInfo:o,currentImage:o.imageUrl},o.imagesUrl&&(this.product.imagesStock=[o.imageUrl,...o.imagesUrl]),o.artist}).catch(l=>console.log(l.response.data.message))},getRelatedProducts(e,r){let l=this.sortNewest.newestProduct.filter(o=>o.artist===e&&o.id!==r);l.length||(l=this.sortNewest.newestProduct.filter(o=>o.group===this.product.productInfo.group)),this.relatedProducts=l.slice(0,3)},getArtistInfo(e){this.artistInfo=this.sortNewest.newestArtist.filter(r=>r.title===e)[0]}},async mounted(){try{const e=this.$route.params.id,r=await this.getCurrentProduct(e);await this.getAllProducts(),this.getRelatedProducts(r,e),this.getArtistInfo(r)}catch(e){throw console.log("錯誤:",e),e}},computed:{...P(g,["sortNewest"])},components:{btnFavorite:S}},C={key:0,class:"container user-page-container"},E={class:"row g-1 g-lg-6"},U={class:"col-12 col-md-8"},B={class:"row"},D={class:"position-relative col-12 col-lg-3"},L={class:"bg-tertiary h-100"},R={key:0,class:"position-lg-absolute row gap-0 gap-lg-2 px-2 py-2 py-lg-0 px-lg-auto flex-nowrap flex-lg-wrap overflow-auto scrollbar-y-hide w-lg-100 h-lg-100"},F=["onClick"],H=["src"],M={class:"col-12 col-lg-9 order-first order-lg-last flex-shrink-0 content"},O={class:"bg-tertiary ratio-1x1 overflow-hidden"},$=["src","alt"],q={class:"col-12 col-md-4"},z={class:"p-3 p-lg-7 mb-3 mb-md-6 bg-tertiary"},J={class:"d-flex justify-content-between align-items-start mb-5 mb-md-7"},W={class:"h5 fw-bold"},G={class:"lh-base lh-md-lg fs-info text-info"},K={key:1,class:"container"},Q={class:"py-7 py-md-9"},X={class:"d-flex justify-content-between align-items-center mb-7 mb-md-8"},Y=t("h2",{class:"fs-2 fs-md-1"},"相似作品",-1),Z={class:"row g-3 g-md-8"},tt={class:"position-relative d-flex justify-content-center align-items-center ratio-1x1 overflow-hidden product-img"},et=["src","alt"],ot=["src"],st={class:"py-3 px-0 px-md-4"},rt={class:"mb-2 fs-info fs-md-5 fw-bold text-default"},it={key:0,class:"d-flex justify-content-between align-items-center"},ct={class:"fs-info fs-md-6 text-info"};function nt(e,r,l,o,i,x){const m=w("btnFavorite"),_=w("router-link");return c(),n(h,null,[i.product.productInfo?(c(),n("div",C,[t("div",E,[t("div",U,[t("div",B,[t("div",D,[t("div",L,[i.product.imagesStock?(c(),n("div",R,[(c(!0),n(h,null,b(i.product.imagesStock,(s,p)=>(c(),n("a",{href:"#",class:"col-3 col-lg-12 ratio-1x1 overflow-hidden",key:"img"+p,onClick:k(lt=>x.changeImage(p),["prevent"])},[t("img",{src:s,alt:"product",class:"object-fit-contain w-100 h-100"},null,8,H)],8,F))),128))])):d("",!0)])]),t("div",M,[t("div",O,[t("img",{src:i.product.currentImage,alt:i.product.productInfo.title,class:"object-fit-contain w-100 h-100"},null,8,$)])])])]),t("div",q,[t("div",z,[t("div",J,[t("div",null,[t("h2",W,u(i.product.productInfo.title),1)]),a(m)]),t("p",G,u(i.product.productInfo.content),1)])])])])):d("",!0),i.relatedProducts.length?(c(),n("div",K,[t("div",Q,[t("div",X,[Y,a(_,{to:"/productlist",class:"text-default border-bottom border-default fw-bold fs-info fs-md-6"},{default:f(()=>[A("瀏覽更多")]),_:1})]),t("div",Z,[(c(!0),n(h,null,b(i.relatedProducts,s=>(c(),n("div",{class:"col-6 col-md-4",key:s.id},[a(_,{to:`/productinfo/${s.id}`},{default:f(()=>[t("div",tt,[t("img",{src:s.imageUrl,alt:s.title,class:"object-fit-contain w-100 h-100 product-img-up"},null,8,et),t("img",{src:s.imagesUrl[0],alt:"item.title",class:"position-absolute z-n1 object-fit-contain w-100 h-100 product-img-down"},null,8,ot)])]),_:2},1032,["to"]),t("div",st,[a(_,{to:`/productinfo/${s.id}`},{default:f(()=>[t("h3",rt,u(s.title),1)]),_:2},1032,["to"]),e.isArtistBlock?d("",!0):(c(),n("div",it,[t("p",ct,"NT$ "+u(s.price.toLocaleString()),1),a(m)]))])]))),128))])])])):d("",!0)],64)}const ft=I(j,[["render",nt]]);export{ft as default};
