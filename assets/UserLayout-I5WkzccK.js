import{c as k}from"./userCartStore-0eyep2_N.js";import{m as L,a as v,_ as b,r as p,o as a,c as r,w as T,v as S,b as t,F as g,d as w,e as n,f as c,g as u,t as h,h as N,O as B,n as P,i as y,j as M,p as A,k as U}from"./index-XGQmqWAH.js";import{f as R}from"./favoriteStore-Dhj1QkED.js";import{u as x}from"./userProductStore-thdM8GQl.js";import{T as V}from"./ToastComponent-tYs-j2i_.js";import"./statusStore-rkGp4Hxn.js";import"./sweetalert2.all-Y0QWwyaB.js";const j={data(){return{isAutoComplete:!1,search:""}},methods:{...L(x,["getAllProducts"])},computed:{...v(x,["allProducts"]),filterProducts(){return this.allProducts.filter(s=>s.title.includes(this.search)).sort((s,f)=>s.title.localeCompare(f.title))}},watch:{$route(){this.search=""}},mounted(){this.getAllProducts()}},D={class:"position-relative"},E=t("i",{class:"position-absolute start-0 top-50 ms-5 bi bi-search translate-middle"},null,-1),W={key:0,class:"position-absolute z-1 start-0 mt-1 list-unstyled overflow-y-scroll bg-white border border-primary w-100 dropdown-scrollbar"},z={key:0,class:"p-3 text-info"};function F(e,s,f,m,_,i){const o=p("router-link");return a(),r("div",D,[T(t("input",{type:"search",class:"pe-3 ps-8 rounded-pill border-default form-control bg-transparent fs-info",placeholder:"搜尋作品",style:{height:"28px"},"onUpdate:modelValue":s[0]||(s[0]=d=>_.search=d),"aria-label":"Search",onInput:s[1]||(s[1]=(...d)=>e.debouncedSearch&&e.debouncedSearch(...d))},null,544),[[S,_.search,void 0,{trim:!0}]]),E,_.search?(a(),r("ul",W,[i.filterProducts.length?(a(!0),r(g,{key:1},w(i.filterProducts,d=>(a(),r("li",{key:d.id},[n(o,{to:`/productinfo/${d.id}`,class:"d-block p-3 text-default link-hover-bg"},{default:c(()=>[u(h(d.title),1)]),_:2},1032,["to"])]))),128)):(a(),r("li",z," 未搜尋到符合輸入的作品 "))])):N("",!0)])}const I=b(j,[["render",F]]),O={data(){return{mobileNav:null}},methods:{showCartList(){window.innerWidth>=991.98&&this.$refs.cartList.classList.remove("d-none")},hideCartList(){window.innerWidth>=991.98&&this.$refs.cartList.classList.add("d-none")},openMobileNav(){this.mobileNav.show()},closeMobileNav(){this.mobileNav.hide()}},watch:{$route(){this.closeMobileNav()}},mounted(){this.mobileNav=new B(this.$refs.mobileNav)},computed:{...v(k,["cartsList"]),...v(R,["favoriteList"])},components:{ProductSearch:I}},q={class:"fixed-top"},G={class:"bg-primary"},H={class:"position-relative d-flex align-items-center container justify-content-between"},J=t("i",{class:"bi bi-list fs-5"},null,-1),K=[J],Q={class:"d-none d-lg-flex align-items-center list-unstyled"},X=t("h1",{class:"position-absolute top-50 start-50 translate-middle"},[t("a",{href:"#/home",class:"d-block h-100 h5 fs-md-20 fw-bold text-default"},"WANDERER LAND")],-1),Y={class:"d-flex align-items-center list-unstyled"},Z={class:"d-none d-lg-block"},tt={class:"py-4 px-2"},st=t("i",{class:"bi bi-handbag"},null,-1),et={key:0,class:"position-absolute badge bg-default rounded-circle text-white",style:{top:"8px",right:"-10px","font-size":"8px"}},ot={key:0},lt={class:"py-3 text-center border-bottom border-default"},it={class:"list-unstyled"},nt={class:"row g-5"},at={class:"col-4"},rt=["src","alt"],ct={class:"col-8 d-flex flex-column justify-content-between"},dt={class:"fw-bold single-ellipsis"},ut={class:"fs-info single-ellipsis"},ft={class:"d-flex py-3 justify-content-between mb-6 fw-bold"},pt=t("p",null,"總計",-1),_t={key:1},ht=t("p",{class:"py-3 text-center"},"目前購物車內沒有內容",-1),bt={class:"offcanvas offcanvas-start bg-primary",tabindex:"-1",id:"offcanvasNav","aria-labelledby":"offcanvasNavLabel",ref:"mobileNav"},mt=t("div",{class:"offcanvas-header"},[t("h5",{class:"offcanvas-title",id:"offcanvasNavLabel"},"WANDERER LAND"),t("button",{type:"button",class:"btn-close text-reset","data-bs-dismiss":"offcanvas","aria-label":"Close"})],-1),vt={class:"offcanvas-body"},gt={class:"d-flex flex-column gap-3 gap-sm-5 list-unstyled"};function yt(e,s,f,m,_,i){const o=p("router-link"),d=p("ProductSearch");return a(),r(g,null,[t("div",q,[t("nav",G,[t("div",H,[t("button",{class:"d-block d-lg-none px-0 border-0 bg-transparent",type:"button","aria-controls":"offcanvasNav",onClick:s[0]||(s[0]=(...l)=>i.openMobileNav&&i.openMobileNav(...l))},K),t("ul",Q,[t("li",null,[n(o,{to:"/productlist",class:"d-block px-5 py-4 text-default navlink-underline"},{default:c(()=>[u("作品")]),_:1})]),t("li",null,[n(o,{to:"/artistlist",class:"d-block px-5 py-4 text-default navlink-underline"},{default:c(()=>[u("藝術家")]),_:1})]),t("li",null,[n(o,{to:"/articlelist",class:"d-block px-5 py-4 text-default navlink-underline"},{default:c(()=>[u("最新消息")]),_:1})])]),X,t("ul",Y,[t("li",Z,[n(d)]),t("li",tt,[n(o,{to:"/favoritelist",class:"position-relative text-default"},{default:c(()=>[t("i",{class:P(["bi",e.favoriteList.length?"bi-heart-fill":"bi-heart"])},null,2)]),_:1})]),t("li",{class:"py-4 ps-2",onMouseenter:s[3]||(s[3]=(...l)=>i.showCartList&&i.showCartList(...l)),onMouseleave:s[4]||(s[4]=(...l)=>i.hideCartList&&i.hideCartList(...l)),style:{"padding-right":"8px","margin-right":"-8px"}},[n(o,{to:"/cart",class:"position-relative text-default"},{default:c(()=>[st,e.cartsList.final_total?(a(),r("div",et,h(e.cartsList.carts.length),1)):N("",!0)]),_:1}),t("div",{class:"d-none position-absolute end-0 top-100 px-6 pb-7 bg-primary",ref:"cartList",style:{"max-width":"375px"},onMouseenter:s[1]||(s[1]=(...l)=>i.showCartList&&i.showCartList(...l)),onMouseleave:s[2]||(s[2]=(...l)=>i.hideCartList&&i.hideCartList(...l))},[e.cartsList.total?(a(),r("div",ot,[t("p",lt,h(e.cartsList.carts.length)+" 個商品",1),t("ul",it,[(a(!0),r(g,null,w(e.cartsList.carts,l=>(a(),r("li",{key:l.product_id,class:"py-3 border-bottom border-default"},[t("div",nt,[t("div",at,[t("img",{src:l.product.imageUrl,alt:l.product.title,class:"w-100 h-100 object-fit-contain"},null,8,rt)]),t("div",ct,[t("div",null,[t("p",dt,h(l.product.title),1),t("p",ut,h(l.product.artist),1)]),t("p",null,"NT$ "+h(l.product.price.toLocaleString()),1),t("p",null,"數量："+h(l.qty),1)])])]))),128))]),t("div",ft,[pt,t("p",null,"NT$ "+h(e.cartsList.final_total.toLocaleString()),1)]),n(o,{to:"/cart",class:"py-2 btn btn-default text-center rounded-0 w-100 fw-bold"},{default:c(()=>[u("前往購物車")]),_:1})])):(a(),r("div",_t,[ht,n(o,{to:"/productlist",class:"py-2 btn btn-default text-center rounded-0 w-100 fw-bold"},{default:c(()=>[u("瀏覽作品")]),_:1})]))],544)],32)])])])]),t("div",bt,[mt,t("div",vt,[t("ul",gt,[t("li",null,[n(d)]),t("li",null,[n(o,{to:"/productlist",class:"d-block py-4 text-default navlink-underline"},{default:c(()=>[u("作品")]),_:1})]),t("li",null,[n(o,{to:"/artistlist",class:"d-block py-4 text-default navlink-underline"},{default:c(()=>[u("藝術家")]),_:1})]),t("li",null,[n(o,{to:"/articlelist",class:"d-block py-4 text-default navlink-underline"},{default:c(()=>[u("最新消息")]),_:1})])])])],512)],64)}const xt=b(O,[["render",yt]]),kt={props:["isLoggedin"]},Lt={class:"bg-primary w-100"},wt={class:"d-flex justify-content-between align-items-center container py-6 py-md-7"},Nt=M('<div class="col-8"><div class="d-flex gap-3 mb-3"><a href="https://www.linkedin.com/in/annchou/" target="_blank"><i class="bi bi-linkedin fs-4 text-default"></i></a><a href="https://github.com/AnnChouCode/WandererLand" target="_blank"><i class="bi bi-github fs-4 text-default"></i></a></div><p class="fs-info fs-md-6">本網站僅供個人作品使用，<span class="d-block d-sm-inline">不提供商業用途</span></p></div>',1),$t={class:"col-4 text-end"};function Ct(e,s,f,m,_,i){const o=p("RouterLink");return a(),r("footer",Lt,[t("div",wt,[Nt,t("div",$t,[f.isLoggedin?(a(),y(o,{key:1,to:"/admin",class:"text-default fs-info fs-md-6"},{default:c(()=>[u(" 管理者後台 ")]),_:1})):(a(),y(o,{key:0,to:"/userlogin",class:"text-default fs-info fs-md-6"},{default:c(()=>[u(" 登入 ")]),_:1}))])])])}const Tt=b(kt,[["render",Ct]]),St={methods:{backToTop(){document.body.scrollTop=0,document.documentElement.scrollTop=0}}},Bt=e=>(A("data-v-fe0b2bf4"),e=e(),U(),e),Pt=Bt(()=>t("i",{class:"fs-1 bi bi-arrow-up-circle-fill text-info"},null,-1)),Mt=[Pt];function At(e,s,f,m,_,i){return a(),r("button",{type:"button",class:"btn",onClick:s[0]||(s[0]=(...o)=>i.backToTop&&i.backToTop(...o))},Mt)}const Ut=b(St,[["render",At],["__scopeId","data-v-fe0b2bf4"]]),Rt={data(){return{isLoggedin:"false"}},methods:{...L(k,["getCartsList"])},mounted(){var s;((s=document.cookie.split("; ").find(f=>f.startsWith("user=")))==null?void 0:s.split("=")[1])||(this.isLoggedin=!this.isLoggedin),this.getCartsList()},components:{ToastComponent:V,UserNavBar:xt,UserFooter:Tt,BtnBackToTop:Ut}},Vt={class:"d-flex flex-column dvh-100"};function jt(e,s,f,m,_,i){const o=p("UserNavBar"),d=p("RouterView"),l=p("UserFooter"),$=p("ToastComponent"),C=p("BtnBackToTop");return a(),r("div",Vt,[n(o),n(d),n(l,{isLoggedin:_.isLoggedin},null,8,["isLoggedin"]),n($,{class:"position-fixed z-3 end-0",style:{bottom:"45px"}}),n(C,{class:"position-fixed z-3 bottom-0 end-0"})])}const qt=b(Rt,[["render",jt]]);export{qt as default};
