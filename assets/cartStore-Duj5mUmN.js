import{V as p,M as l,O as r}from"./index-WNumrVw8.js";import{s as i}from"./sweetalert2.all-3UPPIVx5.js";var u={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"wandererland",BASE_URL:"/WandererLand/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const d=p.useLoading(),{VITE_API:c,VITE_PATH:n}=u,m=l("cartStore",{state:()=>({cartsList:[],toastState:!0,doAction:null,coupon_code:""}),actions:{addToCart(t,e){const s=d.show(),a=`${c}/api/${n}/cart`,o={data:{product_id:t,qty:e}};r.post(a,o).then(h=>{this.toastState=!this.toastState,this.doAction="addToCart",this.getCartsList()}).catch(h=>{i.fire({icon:"error",text:h.response.data.message})}).finally(()=>{s.hide()})},getCartsList(){const t=`${c}/api/${n}/cart`;r.get(t).then(e=>{this.cartsList=e.data.data}).catch(e=>{i.fire({icon:"error",text:e.response.data.message})})},updateCart(t){const e=d.show(),s=`${c}/api/${n}/cart/${t.id}`,a={data:{product_id:t.product_id,qty:t.qty}};r.put(s,a).then(o=>{this.toastState=!this.toastState,this.doAction="updateCart",this.getCartsList()}).catch(o=>{i.fire({icon:"error",text:o.response.data.message})}).finally(()=>{e.hide()})},deleteCartItem(t){const e=d.show(),s=`${c}/api/${n}/cart/${t}`;r.delete(s).then(a=>{this.toastState=!this.toastState,this.doAction="deleteCartItem",this.getCartsList()}).catch(a=>{i.fire({icon:"error",text:a.response.data.message})}).finally(()=>{e.hide()})},copyCouponCode(t){navigator.clipboard.writeText(t).then(()=>{this.toastState=!this.toastState,this.doAction="copyCouponCode",this.coupon_code=t})}}});export{m as c};
