import{u as g}from"./userProductStore-FmHkV_A1.js";import{_ as y,O as S,o as l,c as i,b as t,q as c,F as u,k as b,t as h,f as w,m as k,a as L,r as v,d as _,w as m}from"./index-SuvShJ5P.js";import{b as C}from"./btnFavorite-z1CZbQeV.js";import"./sweetalert2.all-6q_o9MV5.js";const F={data(){return{filterRules:{},mobileNav:null}},props:["allArtists","groupList","productSizeList"],methods:{filterShow(n){if(n){const[o,r]=n;this.filterRules[o]=r;const d=Object.entries(this.filterRules).map(a=>a.join("=")).join("&");this.$router.push(`/productList?${d}`);return}this.filterRules={},this.$router.push("/productList")},openMobileNav(){this.mobileNav.show()},closeMobileNav(){this.mobileNav.hide()}},mounted(){this.mobileNav=new S(this.$refs.mobileNav);const n=window.location.href.split("?")[1];if(!n){this.filterRules={};return}n.split("&").forEach(o=>{const r=o.split("=");this.filterRules[r[0]]=r[1]})}},N={class:"fixed-top z-1 bg-tertiary nav-product-filter w-100"},z={class:"container"},$={class:"d-none d-lg-flex align-items-center"},A={class:"d-flex align-items-center list-unstyled"},P={class:"dropdown"},j=t("button",{type:"button",class:"btn d-flex align-items-center px-5 py-4 text-default fs-info border-0",id:"btnProductSort","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("span",{class:"me-3"},"排序"),t("i",{class:"bi bi-chevron-down"})],-1),R={class:"dropdown-menu p-0 rounded-0","aria-labelledby":"btnProductSort"},q={class:"dropdown"},G=t("button",{type:"button",class:"btn d-flex align-items-center px-5 py-4 text-default fs-info border-0",id:"btnSizeFilter","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("span",{class:"me-3"},"尺寸"),t("i",{class:"bi bi-chevron-down"})],-1),T={class:"dropdown-menu p-0 overflow-y-scroll rounded-0","aria-labelledby":"btnSizeFilter",style:{"max-height":"400px"}},H=["onClick"],O={class:"dropdown"},E=t("button",{type:"button",class:"btn d-flex align-items-center px-5 py-4 text-default fs-info border-0",id:"btnGroupFilter","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("span",{class:"me-3"},"題材"),t("i",{class:"bi bi-chevron-down"})],-1),M={class:"dropdown-menu p-0 overflow-y-scroll rounded-0","aria-labelledby":"btnGroupFilter",style:{"max-height":"400px"}},B=["onClick"],D={class:"dropdown"},U=t("button",{type:"button",class:"btn d-flex align-items-center px-5 py-4 text-default fs-info border-0",id:"btnArtistFilter","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("span",{class:"me-3"},"藝術家"),t("i",{class:"bi bi-chevron-down"})],-1),V={class:"dropdown-menu p-0 overflow-y-scroll rounded-0","aria-labelledby":"btnArtistFilter",style:{"max-height":"400px"}},I=["onClick"],W={class:"d-flex d-lg-none align-items-center justify-content-between"},J={class:"d-flex align-items-center list-unstyled"},K={class:"dropdown"},Q=t("button",{type:"button",class:"btn d-flex align-items-center px-5 py-4 text-default fs-info border-0",id:"btnProductSort","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("span",{class:"me-3"},"排序"),t("i",{class:"bi bi-chevron-down"})],-1),X={class:"dropdown-menu p-0 rounded-0","aria-labelledby":"btnProductSort"},Y=t("span",{class:"me-3"},"篩選",-1),Z=t("i",{class:"bi bi-chevron-down"},null,-1),tt=[Y,Z],et={class:"offcanvas offcanvas-start bg-primary",tabindex:"-1",id:"offcanvasNav","aria-labelledby":"offcanvasNavLabel",ref:"mobileNav"},st=t("div",{class:"offcanvas-header"},[t("h5",{class:"offcanvas-title",id:"offcanvasNavLabel"},"WANDERER LAND"),t("button",{type:"button",class:"btn-close text-reset","data-bs-dismiss":"offcanvas","aria-label":"Close"})],-1),ot={class:"offcanvas-body"},lt={class:"d-flex flex-column gap-3 gap-sm-5 list-unstyled accordion accordion-flush",id:"accordionFlushFilter"},it={class:"accordion-item bg-transparent"},nt=t("h2",{class:"accordion-header"},[t("button",{class:"accordion-button collapsed px-0 text-default bg-transparent",type:"button","data-bs-toggle":"collapse","data-bs-target":"#flush-collapseSize","aria-expanded":"false","aria-controls":"flush-collapseSize"}," 尺寸 ")],-1),rt={id:"flush-collapseSize",class:"accordion-collapse collapse","data-bs-parent":"#accordionFlushSize"},at={class:"accordion-body px-0 py-0"},dt={class:"list-unstyled","aria-labelledby":"btnSizeFilter"},ct=["onClick"],ut={class:"accordion-item bg-transparent"},pt=t("h2",{class:"accordion-header"},[t("button",{class:"accordion-button collapsed px-0 text-default bg-transparent",type:"button","data-bs-toggle":"collapse","data-bs-target":"#flush-collapseGroup","aria-expanded":"false","aria-controls":"flush-collapseGroup"}," 題材 ")],-1),ft={id:"flush-collapseGroup",class:"accordion-collapse collapse","data-bs-parent":"#accordionFlushGroup"},ht={class:"accordion-body px-0 py-0"},bt={class:"list-unstyled","aria-labelledby":"btnGroupFilter"},_t=["onClick"],vt={class:"accordion-item bg-transparent"},gt=t("h2",{class:"accordion-header"},[t("button",{class:"accordion-button collapsed px-0 text-default bg-transparent",type:"button","data-bs-toggle":"collapse","data-bs-target":"#flush-collapseArtist","aria-expanded":"false","aria-controls":"flush-collapseArtist"}," 藝術家 ")],-1),wt={id:"flush-collapseArtist",class:"accordion-collapse collapse","data-bs-parent":"#accordionFlushArtist"},mt={class:"accordion-body px-0 py-0"},yt={class:"list-unstyled","aria-labelledby":"btnArtistFilter"},xt=["onClick"];function St(n,o,r,d,a,s){return l(),i(u,null,[t("nav",N,[t("div",z,[t("div",$,[t("ul",A,[t("li",null,[t("div",P,[j,t("ul",R,[t("li",null,[t("a",{class:"dropdown-item p-3",href:"#",onClick:o[0]||(o[0]=c(e=>s.filterShow(["sort","newest"]),["prevent"]))},"最新作品")]),t("li",null,[t("a",{class:"dropdown-item p-3",href:"#",onClick:o[1]||(o[1]=c(e=>s.filterShow(["sort","priceHighToLow"]),["prevent"]))},"價格：高至低")]),t("li",null,[t("a",{class:"dropdown-item p-3",href:"#",onClick:o[2]||(o[2]=c(e=>s.filterShow(["sort","priceLowToHigh"]),["prevent"]))},"價格：低至高")])])])]),t("li",null,[t("div",q,[G,t("ul",T,[(l(!0),i(u,null,b(r.productSizeList,e=>(l(),i("li",{key:e},[t("a",{class:"dropdown-item p-3",href:"#",onClick:c(p=>s.filterShow(["size",e]),["prevent"])},h(e),9,H)]))),128))])])]),t("li",null,[t("div",O,[E,t("ul",M,[(l(!0),i(u,null,b(r.groupList.productGroupList,e=>(l(),i("li",{key:e},[t("a",{class:"dropdown-item p-3",href:"#",onClick:c(p=>s.filterShow(["group",e]),["prevent"])},h(e),9,B)]))),128))])])]),t("li",null,[t("div",D,[U,t("ul",V,[(l(!0),i(u,null,b(r.allArtists,e=>(l(),i("li",{key:e.id},[t("a",{class:"dropdown-item p-3",href:"#",onClick:c(p=>s.filterShow(["artist",e.title]),["prevent"])},h(e.title),9,I)]))),128))])])])]),Object.keys(a.filterRules).length?(l(),i("button",{key:0,class:"btn btn-outline-default rounded-0 fs-info",type:"button",onClick:o[3]||(o[3]=e=>s.filterShow())},"清空篩選")):w("",!0)]),t("div",W,[t("ul",J,[t("li",null,[t("div",K,[Q,t("ul",X,[t("li",null,[t("a",{class:"dropdown-item p-3",href:"#",onClick:o[4]||(o[4]=c(e=>s.filterShow(["sort","newest"]),["prevent"]))},"最新作品")]),t("li",null,[t("a",{class:"dropdown-item p-3",href:"#",onClick:o[5]||(o[5]=c(e=>s.filterShow(["sort","priceHighToLow"]),["prevent"]))},"價格：高至低")]),t("li",null,[t("a",{class:"dropdown-item p-3",href:"#",onClick:o[6]||(o[6]=c(e=>s.filterShow(["sort","priceLowToHigh"]),["prevent"]))},"價格：低至高")])])])]),t("li",null,[t("button",{type:"button",class:"btn d-flex align-items-center px-5 py-4 text-default fs-info border-0","aria-controls":"offcanvasFilterNav",onClick:o[7]||(o[7]=(...e)=>s.openMobileNav&&s.openMobileNav(...e))},tt)])]),Object.keys(a.filterRules).length?(l(),i("button",{key:0,class:"btn btn-outline-default rounded-0 fs-info",type:"button",onClick:o[8]||(o[8]=e=>s.filterShow())},"清空篩選")):w("",!0)])])]),t("div",et,[st,t("div",ot,[t("ul",lt,[t("li",it,[nt,t("div",rt,[t("div",at,[t("ul",dt,[(l(!0),i(u,null,b(r.productSizeList,e=>(l(),i("li",{key:e},[t("a",{class:"d-block p-3 text-info",href:"#",onClick:c(p=>s.filterShow(["size",e]),["prevent"])},h(e),9,ct)]))),128))])])])]),t("li",ut,[pt,t("div",ft,[t("div",ht,[t("ul",bt,[(l(!0),i(u,null,b(r.groupList.productGroupList,e=>(l(),i("li",{key:e},[t("a",{class:"d-block p-3 text-info",href:"#",onClick:c(p=>s.filterShow(["group",e]),["prevent"])},h(e),9,_t)]))),128))])])])]),t("li",vt,[gt,t("div",wt,[t("div",mt,[t("ul",yt,[(l(!0),i(u,null,b(r.allArtists,e=>(l(),i("li",{key:e.id},[t("a",{class:"d-block p-3 text-info",href:"#",onClick:c(p=>s.filterShow(["artist",e.title]),["prevent"])},h(e.title),9,xt)]))),128))])])])])])])],512)],64)}const kt=y(F,[["render",St]]),Lt={data(){return{productsList:[]}},methods:{...k(g,["getAllProducts","getSizeList"]),filterShow(n){const{sort:o,...r}=n;let d=this.sortNewest.newestProduct;Object.entries(r).forEach(([a,s])=>{s===""||s===void 0||(d=d.filter(e=>e[a]===s))}),o==="newest"?d=d.sort((a,s)=>s.create_at-a.create_at):o==="priceHighToLow"?d=d.sort((a,s)=>s.price-a.price):o==="priceLowToHigh"&&(d=d.sort((a,s)=>a.price-s.price)),this.productsList=d}},watch:{$route(){const n={sort:this.$route.query.sort,artist:this.$route.query.artist,group:this.$route.query.group,size:this.$route.query.size};this.filterShow(n)}},async mounted(){await this.getAllProducts();const n={sort:this.$route.query.sort,artist:this.$route.query.artist,group:this.$route.query.group,size:this.$route.query.size};this.filterShow(n),this.getSizeList()},computed:{...L(g,["allArtists","sortNewest","groupList","productSizeList"])},components:{btnFavorite:C,userNavProductFilter:kt}},Ct={class:"container user-product-page-container flex-grow-1"},Ft=t("h2",{class:"mb-7 mb-md-8 h1 lh-sm title-letter-spacing text-center h1"},"作品",-1),Nt={class:"row g-3 g-md-8"},zt={class:"position-relative d-flex justify-content-center align-items-center ratio-1x1 overflow-hidden product-img"},$t=["src","alt"],At=["src"],Pt={class:"py-3 px-0 px-md-4"},jt={class:"mb-2 fs-info fs-md-5 fw-bold text-default"},Rt={class:"d-flex justify-content-between align-items-center"},qt={class:"fs-info fs-md-6 text-info"};function Gt(n,o,r,d,a,s){const e=v("userNavProductFilter"),p=v("router-link"),x=v("btnFavorite");return l(),i(u,null,[_(e,{allArtists:n.allArtists,groupList:n.groupList,productSizeList:n.productSizeList,onFilterShow:s.filterShow},null,8,["allArtists","groupList","productSizeList","onFilterShow"]),t("div",Ct,[Ft,t("div",Nt,[(l(!0),i(u,null,b(a.productsList,f=>(l(),i("div",{class:"col-6 col-md-4",key:f.id},[_(p,{to:`productInfo/${f.id}`},{default:m(()=>[t("div",zt,[t("img",{src:f.imageUrl,alt:f.title,class:"object-fit-contain w-100 h-100 product-img-up"},null,8,$t),t("img",{src:f.imagesUrl[0],alt:"item.title",class:"position-absolute z-n1 object-fit-contain w-100 h-100 product-img-down"},null,8,At)])]),_:2},1032,["to"]),t("div",Pt,[_(p,{to:`productInfo/${f.id}`},{default:m(()=>[t("h3",jt,h(f.title),1)]),_:2},1032,["to"]),t("div",Rt,[t("p",qt,"NT$ "+h(f.price.toLocaleString()),1),_(x)])])]))),128))])])],64)}const Mt=y(Lt,[["render",Gt]]);export{Mt as default};
